{"version":3,"sources":["pages/DisplayList.js","components/HarvestedItemFilterBlock.js","utility/stringUtil.js","data/Monster.js","data/HarvestingTable.js","data/TrinketTable.js","data/CraftableItem.js","data/HarvestedItem.js","redux/actionTypes.js","redux/actions.js","redux/reducers/monstersReducer.js","redux/reducers/index.js","redux/store.js","utility/StorageUtil.js","utility/harvestedItemUtil.js","pages/HarvestedItems.js","pages/Home.js","redux/selectors.js","data/referenceCardSizes.js","pages/MonsterDisplayList.js","utility/statsUtil.js","utility/trinketTableUtil.js","utility/inputUtil.js","utility/descriptionUtil.js","utility/craftableItemUtil.js","utility/harvestingTableUtil.js","components/RenderBlocks.js","components/MonsterDisplay.js","utility/monsterUtil.js","pages/Monsters.js","pages/CraftableItems.js","navigationConstants.js","LayoutControl/NavMenu.js","LayoutControl/Layout.js","App.js","serviceWorker.js","index.js"],"names":["DisplayColumn","colDisplay","listDisplayFunc","ascendingSortFunction","this","sortFunc","bind","sortAscending","sortDescending","isAscending","a","b","DisplayList","props","headers","items","useState","sortByIdx","setSortByIdx","setSortAscending","headerRowContents","i","push","Col","key","onClick","e","preventDefault","className","length","filterObject","filterKeys","Object","keys","filter","sort","contentsRows","itemLen","map","item","idx","DisplayListRow","idFunction","pathRoot","isSelected","selectedId","Row","history","useHistory","innerCols","desiredId","headerLen","h","headerObj","pathRoute","activeName","HarvestedItemFilterBlock","label","value","setter","nameField","setNameField","filterRows","type","style","width","onChange","target","onSubmit","obj","Name","toLowerCase","match","submitFilter","display","x","y","Array","prototype","last","arg","undefined","String","leadingCharacter","splitByTags","string","char","char2","tagDepth","out","curStr","isLastOpen","len","replace","splitTagByPipe","_splitByPipeBase","_stripTagLayer","str","includes","it","startsWith","firstIndex","indexOf","substr","splitFirstSpace","slice","tag","text","tagStr","tagGroups","split","trim","seen","Set","has","add","tags","join","attackTagToFull","rollText","displayText","n","Number","isNaN","Error","asNum","compactText","flags","parts","newText","oldText","stripTags","nxtStr","err","console","error","Monster","name","referenceCardSize","source","otherSources","creatureSize","creatureType","stats","armorClass","challengeRating","health","passivePerc","languages","speed","saves","skills","senses","alignment","resistances","immunities","conditionImmunities","traits","spellcasting","actions","reactions","environments","legendaryHeader","legendaryActions","harvestingTable","trinketTableType","cardSize","size","fiveEState","feType","CreatureType","inObj","swarmSize","tg","prefix","log","feCR","cr","ChallengeRating","feACLines","ac","line","acObj","parseInt","from","condition","ArmorClass","feAlignment","every","ent","Alignment","ali","StatsBlock","HealthBlock","hp","passive","SpeedBlock","walk","fly","swim","climb","burrow","canHover","save","skill","resist","immune","conditionImmune","trait","action","reaction","environment","legendary","chance","k","strOut","stringFromSize","tagOut","outVal","sortStrAsc","lair","coven","matches","exec","crOut","average","formula","SPEED_KEYS","SpeedEntry","val","simpleDisplay","spd","ft","number","dex","con","int","wis","cha","HarvestingTable","rows","r","HarvestingTableRow","oldMonster","Rows","row","difficultyClass","DifficultyClass","itemNameReference","ItemNameRef","quantity","Quantity","notes","Notes","TrinketTable","TrinketTableType","TrinketTableRow","d8Roll","D8Roll","descriptionLine","DescriptionLine","ValueGP","weight","WeightLB","CraftableItem","crafter","rarity","requiresAttunement","description","materials","materialGrouping","attunementNote","oldItem","Crafter","Rarity","RequiresAttunement","Description","Materials","matRow","componentId","ComponentId","Type","MaterialGrouping","AttunementNote","HarvestedItem","craftingUsage","useText","requiredToolNames","CraftingUsage","UseText","RequiredToolNames","TYPES","freeze","ADD_MONSTER","ADD_MONSTERS","ADD_SUB_MONSTER","ADD_SUB_MONSTERS","SELECT_MONSTER","selectMonster","monsterId","payload","initialState","monsterDict","subMonsterDict","selectedMonsterId","previousMonsterId","combineReducers","monsters","state","id","noChange","forEach","mon","createStore","rootReducer","$","window","ajaxJson","fileName","Promise","resolve","reject","getJSON","data","Load5eMonsterFile","localKey","Storage","processedKeys","processingKeys","_meta","meta","dependencies","monster","jdx","depKey","_copy","from5eSource","process","_init","subStateMonsterDict","harvestingTableDict","harvestableItemDict","trinketTableDict","craftableItemDict","delayedMonsters","Init","Index","Data","SubStateMonster","harvestingTables","harvestedItems","harvestedItem","trinketTables","trinketTable","craftableItems","craftableItem","store","dispatch","subMonsters","values","storage","harvestingTableGroup","getItemReference","simplePassthrough","joinArray","splitArray","HarvestedItemDisplay","hItem","para","React","Component","HarvestedItems","filterObj","setFilterObj","matchPath","location","pathname","path","params","harvestedOutput","xs","md","Home","getMonsterDict","getSubMonsterDict","getSelectedMonsterId","CARD_SIZES","connect","displayString","subMon","subMonA","subMonB","title","Sources","disp","monId","stateProps","dispatchProps","ownProps","pure","areMergedPropsEqual","next","prev","printMergeProps","JSON","stringify","itemChanged","selectedChanged","StatBlock","statBlock","Container","getModifierDisplayString","stat","mod","Math","floor","getModifier","TrinketTableDisplay","rowsOut","ArrayInput","redraw","setRedraw","propObj","object","propKey","objKey","defaultInsert","insertLine","tarIndex","splice","arrayLines","subType","index","hideLabel","SelectInput","options","opt","RadioButtonInput","onChangeFunc","checked","for","StringInput","propIdx","disabled","CheckboxInput","ModularDescription","desc","SimpleDescription","ListDescription","lines","ItemDescription","UnhandledDescription","entry","output","styleObj","listStyle","getIdFromItemName","getIdFromItem","CraftableItemDisplay","materialOutput","mat","matItem","finalMaterialOutput","MaterialInput","HarvestingTableDisplay","nameOut","descriptionOut","valueOut","weightOut","craftingOut","j","NavLink","Link","to","apprasialTarget","DynamicRender","toRender","entries","ListRender","list","ItemRender","SpellcastingBlock","headerEntries","spells","will","daily","footerEntries","head","dailyKeys","num","each","lead","spellKeys","spellsBlock","slots","numCount","spellLevel","foot","ACHPSpeed","topBlock","acOut","hpOut","speedOut","SkillsAndSavesBlock","keyValueFunction","inKey","simpleJoinFunction","skillsSavesEtcOut","header","pair","tabKey","setTabKey","tablesTabKey","setTablesTabKey","typeOut","subMonster","traitsAndSpellcastingOut","actionsOut","reactionsOut","hasHarvestingTable","hasTrinketTable","hasTables","otherSourcesOut","oSrc","sm","convertedString","Tabs","activeKey","onSelect","Tab","eventKey","MonsterDisplayList","CraftableItems","displayOutput","MENU","linkName","linkTarget","routePaths","exact","renderFunction","NavMenu","navOutput","linkDeets","NavItem","Navbar","NavbarBrand","navbar","Layout","fluid","children","App","routeOpts","render","Boolean","hostname","baseUrl","document","getElementsByTagName","getAttribute","rootElement","getElementById","then","ReactDOM","StrictMode","basename","navigator","serviceWorker","ready","registration","unregister","catch","message"],"mappings":"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","file":"static/js/main.575e56e4.chunk.js","sourcesContent":["import React, { useState } from \"react\";\r\nimport { useHistory } from \"react-router\";\r\nimport { Row, Col } from \"react-bootstrap\";\r\nimport \"./DisplayList.css\";\r\n\r\nexport class DisplayColumn {\r\n  constructor(colDisplay, listDisplayFunc, ascendingSortFunction) {\r\n    this.colDisplay = colDisplay;\r\n    this.listDisplayFunc = listDisplayFunc;\r\n    this.ascendingSortFunction = ascendingSortFunction;\r\n\r\n    this.sortFunc = this.sortFunc.bind(this);\r\n    this.sortAscending = this.sortAscending.bind(this);\r\n    this.sortDescending = this.sortDescending.bind(this);\r\n  }\r\n\r\n  sortFunc(isAscending) {\r\n    return isAscending ? this.sortAscending : this.sortDescending;\r\n  }\r\n\r\n  sortAscending(a, b) {\r\n    return this.ascendingSortFunction(a, b);\r\n  }\r\n\r\n  sortDescending(a, b) {\r\n    return -this.ascendingSortFunction(a, b);\r\n  }\r\n}\r\n\r\nexport function DisplayList(props) {\r\n  // headers should be a collection of DisplayColumn instances\r\n  let headers = props.headers;\r\n  let items = props.items;\r\n\r\n  let [sortByIdx, setSortByIdx] = useState(0);\r\n  let [sortAscending, setSortAscending] = useState(true);\r\n\r\n  let headerRowContents = [];\r\n  for (let i = 0; i < headers.length; ++i) {\r\n    headerRowContents.push(\r\n      <Col\r\n        key={`dl-h-col-${i}`}\r\n        onClick={(e) => {\r\n          e.preventDefault();\r\n\r\n          if (i === sortByIdx) {\r\n            setSortAscending(!sortAscending);\r\n          } else {\r\n            setSortByIdx(i);\r\n            setSortAscending(true);\r\n          }\r\n        }}\r\n        className={`list-header ${i === sortByIdx && \"active\"}`}\r\n      >\r\n        {headers[i].colDisplay}{\" \"}\r\n        {i === sortByIdx && <>{sortAscending ? \"^\" : \"v\"}</>}\r\n      </Col>\r\n    );\r\n  }\r\n\r\n  let filterObject = props.filterObject;\r\n  let filterKeys = Object.keys(filterObject);\r\n\r\n  for (let i = 0; i < filterKeys.length; ++i) {\r\n    items = items.filter(filterObject[filterKeys[i]]);\r\n  }\r\n\r\n  items.sort(headers[sortByIdx].sortFunc(sortAscending));\r\n\r\n  let contentsRows = [];\r\n  let itemLen = items.length;\r\n  for (let i = 0; i < itemLen; ++i) {\r\n    contentsRows.push();\r\n  }\r\n\r\n  contentsRows = items.map((item, idx) => {\r\n    return (\r\n      <DisplayListRow\r\n        key={`row-${props.idFunction(item)}`}\r\n        headers={headers}\r\n        item={item}\r\n        idFunction={props.idFunction}\r\n        pathRoot={props.pathRoot}\r\n        isSelected={props.idFunction(item) === props.selectedId}\r\n      />\r\n    );\r\n  });\r\n\r\n  return (\r\n    <>\r\n      {/* <span>{items.length}</span> */}\r\n      <Row className=\"mx-0\">{headerRowContents}</Row>\r\n      <ul className=\"element-list\">{contentsRows}</ul>\r\n    </>\r\n  );\r\n}\r\n\r\nfunction DisplayListRow(props) {\r\n  let history = useHistory();\r\n\r\n  let { headers, item, idFunction, pathRoot, isSelected } = props;\r\n\r\n  let innerCols = [];\r\n\r\n  let desiredId = idFunction(item);\r\n\r\n  let headerLen = headers.length;\r\n  for (let h = 0; h < headerLen; ++h) {\r\n    let headerObj = headers[h];\r\n\r\n    innerCols.push(\r\n      <Col key={`${desiredId}-${h}`}>{headerObj.listDisplayFunc(item)}</Col>\r\n    );\r\n  }\r\n\r\n  let pathRoute = `${pathRoot}/${desiredId}`;\r\n\r\n  let activeName = isSelected ? \"active\" : \"\";\r\n\r\n  return (\r\n    <li\r\n      onClick={(e) => {\r\n        history.push(pathRoute);\r\n        e.preventDefault();\r\n      }}\r\n      className={activeName}\r\n    >\r\n      <Row>{innerCols}</Row>\r\n    </li>\r\n  );\r\n}\r\n","import React, { useState } from \"react\";\r\nimport { Col, Row } from \"react-bootstrap\";\r\n\r\nfunction BlockRow_Text(key, label, value, setter) {\r\n    return (\r\n        <Row key={key}>\r\n            <Col className=\"col-3\">{label}:</Col>\r\n            <Col>\r\n                <input\r\n                    type=\"text\"\r\n                    value={value}\r\n                    style={{\r\n                        width: \"inherit\",\r\n                    }}\r\n                    onChange={(e) => {\r\n                        e.preventDefault();\r\n                        setter(e.target.value);\r\n                    }}\r\n                />\r\n            </Col>\r\n        </Row>\r\n    );\r\n}\r\n\r\nexport function HarvestedItemFilterBlock(props) {\r\n    let [nameField, setNameField] = useState(\"\");\r\n\r\n    let filterRows = [];\r\n\r\n    filterRows.push(\r\n        BlockRow_Text(filterRows.length, \"Name\", nameField, setNameField)\r\n    );\r\n\r\n    return (\r\n        <form\r\n            className=\"border\"\r\n            onSubmit={(e) => {\r\n                let obj = {};\r\n                if (nameField !== \"\") {\r\n                    obj.Name = (obj) => {\r\n                        return obj.Name.toLowerCase().match(\r\n                            nameField.toLowerCase()\r\n                        );\r\n                    };\r\n                }\r\n\r\n                props.submitFilter(obj);\r\n                e.preventDefault();\r\n            }}\r\n        >\r\n            {filterRows}\r\n            <button type=\"submit\" style={{ display: \"none\" }}>\r\n                Apply Filter\r\n            </button>\r\n        </form>\r\n    );\r\n}\r\n","// eslint-disable-next-line\r\nArray.prototype.last =\r\n  Array.prototype.last ||\r\n  function (arg) {\r\n    if (arg !== undefined) this[this.length - 1] = arg;\r\n    else return this[this.length - 1];\r\n  };\r\n// eslint-disable-next-line\r\nString.prototype.last =\r\n  String.prototype.last ||\r\n  function () {\r\n    return this[this.length - 1];\r\n  };\r\n\r\nexport function sortAscending(a, b) {\r\n  let x = a.toLowerCase();\r\n  let y = b.toLowerCase();\r\n\r\n  if (y < x) {\r\n    return 1;\r\n  }\r\n  if (x < y) {\r\n    return -1;\r\n  }\r\n  return 0;\r\n}\r\n\r\nconst splitFirstSpace = function (string) {\r\n  const firstIndex = string.indexOf(\" \");\r\n  return firstIndex === -1\r\n    ? [string, \"\"]\r\n    : [string.substr(0, firstIndex), string.substr(firstIndex + 1)];\r\n};\r\n\r\nfunction _splitByTagsBase(leadingCharacter) {\r\n  return function (string) {\r\n    let tagDepth = 0;\r\n    let char, char2;\r\n    const out = [];\r\n    let curStr = \"\";\r\n    let isLastOpen = false;\r\n\r\n    const len = string.length;\r\n    for (let i = 0; i < len; ++i) {\r\n      char = string[i];\r\n      char2 = string[i + 1];\r\n\r\n      switch (char) {\r\n        case \"{\":\r\n          isLastOpen = true;\r\n          if (char2 === leadingCharacter) {\r\n            if (tagDepth++ > 0) {\r\n              curStr += \"{\";\r\n            } else {\r\n              out.push(curStr.replace(/<VE_LEAD>/g, leadingCharacter));\r\n              curStr = `{${leadingCharacter}`;\r\n              ++i;\r\n            }\r\n          } else curStr += \"{\";\r\n          break;\r\n\r\n        case \"}\":\r\n          isLastOpen = false;\r\n          curStr += \"}\";\r\n          if (tagDepth !== 0 && --tagDepth === 0) {\r\n            out.push(curStr.replace(/<VE_LEAD>/g, leadingCharacter));\r\n            curStr = \"\";\r\n          }\r\n          break;\r\n\r\n        case leadingCharacter: {\r\n          if (!isLastOpen) curStr += \"<VE_LEAD>\";\r\n          else curStr += leadingCharacter;\r\n          break;\r\n        }\r\n\r\n        default:\r\n          isLastOpen = false;\r\n          curStr += char;\r\n          break;\r\n      }\r\n    }\r\n\r\n    if (curStr) out.push(curStr.replace(/<VE_LEAD>/g, leadingCharacter));\r\n\r\n    return out;\r\n  };\r\n}\r\n\r\nconst splitByTags = _splitByTagsBase(\"@\");\r\n\r\nconst attackTagToFull = function (tagStr) {\r\n  function renderTag(tags) {\r\n    return `${\r\n      tags.includes(\"m\")\r\n        ? \"Melee \"\r\n        : tags.includes(\"r\")\r\n        ? \"Ranged \"\r\n        : tags.includes(\"g\")\r\n        ? \"Magical \"\r\n        : tags.includes(\"a\")\r\n        ? \"Area \"\r\n        : \"\"\r\n    }${tags.includes(\"w\") ? \"Weapon \" : tags.includes(\"s\") ? \"Spell \" : \"\"}`;\r\n  }\r\n\r\n  const tagGroups = tagStr\r\n    .toLowerCase()\r\n    .split(\",\")\r\n    .map((it) => it.trim())\r\n    .filter((it) => it)\r\n    .map((it) => it.split(\"\"));\r\n  if (tagGroups.length > 1) {\r\n    const seen = new Set(tagGroups.last());\r\n    for (let i = tagGroups.length - 2; i >= 0; --i) {\r\n      tagGroups[i] = tagGroups[i].filter((it) => {\r\n        const out = !seen.has(it);\r\n        seen.add(it);\r\n        return out;\r\n      });\r\n    }\r\n  }\r\n  return `${tagGroups.map((it) => renderTag(it)).join(\" or \")}Attack:`;\r\n};\r\n\r\nconst _splitByPipeBase = function (leadingCharacter) {\r\n  return function (string) {\r\n    let tagDepth = 0;\r\n    let char, char2;\r\n    const out = [];\r\n    let curStr = \"\";\r\n\r\n    const len = string.length;\r\n    for (let i = 0; i < len; ++i) {\r\n      char = string[i];\r\n      char2 = string[i + 1];\r\n\r\n      switch (char) {\r\n        case \"{\":\r\n          if (char2 === leadingCharacter) tagDepth++;\r\n          curStr += \"{\";\r\n\r\n          break;\r\n\r\n        case \"}\":\r\n          if (tagDepth) tagDepth--;\r\n          curStr += \"}\";\r\n\r\n          break;\r\n\r\n        case \"|\": {\r\n          if (tagDepth) curStr += \"|\";\r\n          else {\r\n            out.push(curStr);\r\n            curStr = \"\";\r\n          }\r\n          break;\r\n        }\r\n\r\n        default: {\r\n          curStr += char;\r\n          break;\r\n        }\r\n      }\r\n    }\r\n\r\n    if (curStr) out.push(curStr);\r\n    return out;\r\n  };\r\n};\r\n\r\nconst splitTagByPipe = _splitByPipeBase(\"@\");\r\n\r\nconst _stripTagLayer = function (str) {\r\n  if (str.includes(\"{@\")) {\r\n    const tagSplit = splitByTags(str);\r\n    return tagSplit\r\n      .filter((it) => it)\r\n      .map((it) => {\r\n        if (it.startsWith(\"{@\")) {\r\n          let [tag, text] = splitFirstSpace(it.slice(1, -1));\r\n          text = text.replace(/<\\$([^$]+)\\$>/gi, \"\"); // remove any variable tags\r\n          switch (tag) {\r\n            case \"@b\":\r\n            case \"@bold\":\r\n            case \"@i\":\r\n            case \"@italic\":\r\n            case \"@s\":\r\n            case \"@strike\":\r\n            case \"@u\":\r\n            case \"@underline\":\r\n              return text;\r\n\r\n            case \"@h\":\r\n              return \"Hit: \";\r\n\r\n            case \"@dc\":\r\n              return `DC ${text}`;\r\n\r\n            case \"@atk\":\r\n              return attackTagToFull(text);\r\n\r\n            case \"@chance\":\r\n            case \"@d20\":\r\n            case \"@damage\":\r\n            case \"@dice\":\r\n            case \"@hit\":\r\n            case \"@recharge\": {\r\n              const [rollText, displayText] = splitTagByPipe(text);\r\n              switch (tag) {\r\n                case \"@damage\":\r\n                case \"@dice\": {\r\n                  return displayText || rollText.replace(/;/g, \"/\");\r\n                }\r\n                case \"@d20\":\r\n                case \"@hit\": {\r\n                  return (\r\n                    displayText ||\r\n                    (() => {\r\n                      const n = Number(rollText);\r\n                      if (isNaN(n)) {\r\n                        throw new Error(\r\n                          `Could not parse \"${rollText}\" as a number!`\r\n                        );\r\n                      }\r\n                      return `${n >= 0 ? \"+\" : \"\"}${n}`;\r\n                    })()\r\n                  );\r\n                }\r\n                case \"@recharge\": {\r\n                  const asNum = Number(rollText || 6);\r\n                  if (isNaN(asNum)) {\r\n                    throw new Error(\r\n                      `Could not parse \"${rollText}\" as a number!`\r\n                    );\r\n                  }\r\n                  return `(Recharge ${asNum}${asNum < 6 ? `\\u20136` : \"\"})`;\r\n                }\r\n                case \"@chance\": {\r\n                  return displayText || `${rollText} percent`;\r\n                }\r\n                default:\r\n                  throw new Error(`Unhandled tag: ${tag}`);\r\n              }\r\n            }\r\n\r\n            case \"@comic\":\r\n            case \"@comicH1\":\r\n            case \"@comicH2\":\r\n            case \"@comicH3\":\r\n            case \"@comicH4\":\r\n            case \"@comicNote\":\r\n            case \"@note\":\r\n            case \"@sense\":\r\n            case \"@skill\": {\r\n              return text;\r\n            }\r\n\r\n            case \"@5etools\":\r\n            case \"@adventure\":\r\n            case \"@book\":\r\n            case \"@filter\":\r\n            case \"@footnote\":\r\n            case \"@link\":\r\n            case \"@scaledice\":\r\n            case \"@scaledamage\":\r\n            case \"@loader\":\r\n            case \"@color\":\r\n            case \"@highlight\": {\r\n              const parts = splitTagByPipe(text);\r\n              return parts[0];\r\n            }\r\n\r\n            case \"@area\": {\r\n              const [\r\n                compactText,\r\n                /*areaId,*/ flags,\r\n                //...others\r\n              ] = splitTagByPipe(text);\r\n\r\n              return flags && flags.includes(\"x\")\r\n                ? compactText\r\n                : `${\r\n                    flags && flags.includes(\"u\") ? \"A\" : \"a\"\r\n                  }rea ${compactText}`;\r\n            }\r\n\r\n            case \"@action\":\r\n            case \"@background\":\r\n            case \"@boon\":\r\n            case \"@class\":\r\n            case \"@condition\":\r\n            case \"@creature\":\r\n            case \"@cult\":\r\n            case \"@disease\":\r\n            case \"@feat\":\r\n            case \"@hazard\":\r\n            case \"@item\":\r\n            case \"@language\":\r\n            case \"@object\":\r\n            case \"@optfeature\":\r\n            case \"@psionic\":\r\n            case \"@race\":\r\n            case \"@reward\":\r\n            case \"@vehicle\":\r\n            case \"@spell\":\r\n            case \"@status\":\r\n            case \"@table\":\r\n            case \"@trap\":\r\n            case \"@variantrule\": {\r\n              const parts = splitTagByPipe(text);\r\n              return parts.length >= 3 ? parts[2] : parts[0];\r\n            }\r\n\r\n            case \"@deity\": {\r\n              const parts = splitTagByPipe(text);\r\n              return parts.length >= 4 ? parts[3] : parts[0];\r\n            }\r\n\r\n            case \"@classFeature\": {\r\n              const parts = splitTagByPipe(text);\r\n              return parts.length >= 6 ? parts[5] : parts[0];\r\n            }\r\n\r\n            case \"@subclassFeature\": {\r\n              const parts = splitTagByPipe(text);\r\n              return parts.length >= 8 ? parts[7] : parts[0];\r\n            }\r\n\r\n            case \"@homebrew\": {\r\n              const [newText, oldText] = splitTagByPipe(text);\r\n              if (newText && oldText) {\r\n                return `${newText} [this is a homebrew addition, replacing the following: \"${oldText}\"]`;\r\n              } else if (newText) {\r\n                return `${newText} [this is a homebrew addition]`;\r\n              } else if (oldText) {\r\n                return `[the following text has been removed due to homebrew: ${oldText}]`;\r\n              } else\r\n                throw new Error(`Homebrew tag had neither old nor new text!`);\r\n            }\r\n\r\n            default:\r\n              throw new Error(`Unhandled tag: \"${tag}\"`);\r\n          }\r\n        } else return it;\r\n      })\r\n      .join(\"\");\r\n  }\r\n  return str;\r\n};\r\n\r\nexport function stripTags(str) {\r\n  try {\r\n    if (!str) return str;\r\n    let nxtStr = _stripTagLayer(str);\r\n    while (nxtStr.length !== str.length) {\r\n      str = nxtStr;\r\n      nxtStr = _stripTagLayer(str);\r\n    }\r\n    return nxtStr;\r\n  } catch (err) {\r\n    console.error(`On [${str}]: ${err}`);\r\n    return str;\r\n  }\r\n}\r\n","import { sortAscending as sortStrAsc } from \"../utility/stringUtil\";\r\n\r\nexport class Monster {\r\n  static from5eSource(fiveEState) {\r\n    let feType = null;\r\n\r\n    switch (typeof fiveEState.type) {\r\n      case \"string\":\r\n        feType = new CreatureType({ type: fiveEState.type });\r\n        break;\r\n      case \"object\":\r\n        let { type, tags, swarmSize } = fiveEState.type;\r\n\r\n        let inObj = {\r\n          type: type,\r\n          swarmSize: swarmSize,\r\n        };\r\n        if (tags) {\r\n          inObj.tags = tags.map((tg) =>\r\n            typeof tg === \"string\" ? { tag: tg, prefix: \"\" } : tg\r\n          );\r\n        }\r\n\r\n        feType = new CreatureType(inObj);\r\n\r\n        break;\r\n      default:\r\n        console.log(\r\n          `Unhandled creatureType type: ${typeof fiveEState.type} => ${\r\n            fiveEState.type\r\n          } of ${fiveEState.name}`\r\n        );\r\n        break;\r\n    }\r\n\r\n    let feCR = null;\r\n\r\n    switch (typeof fiveEState.cr) {\r\n      case \"string\":\r\n        feCR = new ChallengeRating({ cr: fiveEState.cr });\r\n        break;\r\n      case \"object\":\r\n        feCR = new ChallengeRating(fiveEState.cr);\r\n        break;\r\n      case \"undefined\":\r\n        feCR = new ChallengeRating({ cr: \"-\" });\r\n        break;\r\n      default:\r\n        console.log(\r\n          `Unhandled CR type: ${typeof fiveEState.cr} => ${fiveEState.cr} of ${\r\n            fiveEState.name\r\n          }`\r\n        );\r\n        break;\r\n    }\r\n\r\n    let feACLines = [];\r\n    for (let i = 0; i < fiveEState.ac.length; ++i) {\r\n      let line = fiveEState.ac[i];\r\n      let acObj = {};\r\n\r\n      switch (typeof line) {\r\n        case \"number\":\r\n          acObj.ac = line;\r\n          break;\r\n        case \"string\":\r\n          acObj.ac = Number.parseInt(line);\r\n          break;\r\n        case \"object\":\r\n          acObj.ac = Number.parseInt(line.ac);\r\n          acObj.from = line.from;\r\n          acObj.condition = line.condition;\r\n          break;\r\n        default:\r\n          console.log(\r\n            `Unhandled AC type: ${typeof fiveEState.ac} => ${\r\n              fiveEState.ac\r\n            } of ${fiveEState.name}`\r\n          );\r\n          break;\r\n      }\r\n\r\n      feACLines.push(new ArmorClass(acObj));\r\n    }\r\n\r\n    let feAlignment = [];\r\n    if (!fiveEState.alignment) {\r\n      // nothing\r\n    } else if (fiveEState.alignment.every((ent) => typeof ent === \"string\")) {\r\n      feAlignment.push(new Alignment({ alignment: fiveEState.alignment }));\r\n    } else {\r\n      feAlignment = fiveEState.alignment.map((ali) => new Alignment(ali));\r\n    }\r\n\r\n    return new Monster({\r\n      name: fiveEState.name, //   name,\r\n      referenceCardSize: 0, // referenceCardSize,\r\n      source: fiveEState.source, // source,\r\n      otherSources: fiveEState.otherSources, // otherSources,\r\n      creatureSize: fiveEState.size, // creatureSize,\r\n      creatureType: feType, // creatureType,\r\n      stats: new StatsBlock(\r\n        fiveEState\r\n        // fiveEState.str,\r\n        // fiveEState.dex,\r\n        // fiveEState.con,\r\n        // fiveEState.int,\r\n        // fiveEState.wis,\r\n        // fiveEState.cha\r\n      ), // stats,\r\n      armorClass: feACLines, // armorClass,\r\n      challengeRating: feCR, // challengeRating,\r\n      health: new HealthBlock(fiveEState.hp), // health,\r\n      passivePerc: fiveEState.passive, // passivePerc,\r\n      languages: fiveEState.languages, // languages,\r\n      speed: new SpeedBlock({\r\n        walk: fiveEState.speed.walk,\r\n        fly: fiveEState.speed.fly,\r\n        swim: fiveEState.speed.swim,\r\n        climb: fiveEState.speed.climb,\r\n        burrow: fiveEState.speed.burrow,\r\n        canHover: fiveEState.speed.canHover,\r\n      }), // speed,\r\n      saves: fiveEState.save, // saves,\r\n      skills: fiveEState.skill, // skills,\r\n      senses: fiveEState.senses, // senses,\r\n      alignment: feAlignment, // alignment\r\n      resistances: fiveEState.resist, // resistances\r\n      immunities: fiveEState.immune, // immunity\r\n      conditionImmunities: fiveEState.conditionImmune, // conditionImmunities\r\n      traits: fiveEState.trait, //traits\r\n      spellcasting: fiveEState.spellcasting, //spellcasting\r\n      actions: fiveEState.action, //actions\r\n      reactions: fiveEState.reaction, //reactions\r\n      environments: fiveEState.environment, //environments\r\n      legendaryHeader: fiveEState.legendaryHeader, //legendaryHeader\r\n      legendaryActions: fiveEState.legendary, //legendaryActions\r\n    });\r\n  }\r\n\r\n  constructor({\r\n    name,\r\n    referenceCardSize,\r\n    source,\r\n    otherSources,\r\n    creatureSize,\r\n    creatureType,\r\n    stats,\r\n    armorClass,\r\n    challengeRating,\r\n    health,\r\n    passivePerc,\r\n    languages,\r\n    speed,\r\n    saves,\r\n    skills,\r\n    senses,\r\n    alignment,\r\n    resistances,\r\n    immunities,\r\n    conditionImmunities,\r\n    traits,\r\n    spellcasting,\r\n    actions,\r\n    reactions,\r\n    environments,\r\n    legendaryHeader,\r\n    legendaryActions,\r\n    harvestingTable,\r\n    trinketTableType,\r\n  }) {\r\n    this.name = name;\r\n    this.cardSize = referenceCardSize;\r\n    this.source = source;\r\n    this.otherSources = otherSources || [];\r\n    this.size = creatureSize;\r\n    this.type = creatureType;\r\n    this.speed = speed;\r\n    this.stats = stats;\r\n    this.saves = saves || null;\r\n    this.skills = skills;\r\n    this.senses = senses;\r\n    this.armorClass = armorClass;\r\n    this.health = health;\r\n    this.passivePerc = passivePerc;\r\n    this.languages = languages;\r\n    this.challengeRating = challengeRating;\r\n    this.resistances = resistances || null;\r\n    this.immunities = immunities || null;\r\n    this.conditionImmunities = conditionImmunities || null;\r\n    this.alignment = alignment;\r\n    this.traits = traits || [];\r\n    this.spellcasting = spellcasting || [];\r\n    this.actions = actions || [];\r\n    this.reactions = reactions || [];\r\n    this.environments = environments || [];\r\n    this.legendaryHeader = legendaryHeader;\r\n    this.legendaryActions = legendaryActions || [];\r\n    this.harvestingTable = harvestingTable || null;\r\n    this.trinketTableType = trinketTableType || null;\r\n  }\r\n\r\n  get id() {\r\n    return (\r\n      this.name.replace(/[\\s'\\-()]/g, \"\") +\r\n      \"_\" +\r\n      this.source\r\n    ).toLowerCase();\r\n  }\r\n\r\n  static stringFromSize(size) {\r\n    switch (size) {\r\n      case \"T\":\r\n        return \"Tiny\";\r\n      case \"S\":\r\n        return \"Small\";\r\n      case \"M\":\r\n        return \"Medium\";\r\n      case \"L\":\r\n        return \"Large\";\r\n      case \"H\":\r\n        return \"Huge\";\r\n      case \"G\":\r\n        return \"Gargantuan\";\r\n      default:\r\n        return `?[${size}]?`;\r\n    }\r\n  }\r\n}\r\n\r\nclass Alignment {\r\n  constructor({ alignment, chance = 100 }) {\r\n    this.alignment = alignment;\r\n    this.chance = chance;\r\n  }\r\n\r\n  get convertedString() {\r\n    let str = this.alignment\r\n      .map((k) => {\r\n        switch (k) {\r\n          case \"N\":\r\n            return \"neutral\";\r\n          case \"C\":\r\n            return \"chaotic\";\r\n          case \"G\":\r\n            return \"good\";\r\n          case \"L\":\r\n            return \"lawful\";\r\n          case \"E\":\r\n            return \"evil\";\r\n          case \"A\":\r\n            return \"any alignment\";\r\n          case \"U\":\r\n            return \"unaligned\";\r\n          default:\r\n            return `?${k}?`;\r\n        }\r\n      })\r\n      .join(\" \");\r\n\r\n    if (this.chance !== 100) {\r\n      str += ` (${this.chance}%)`;\r\n    }\r\n    return str;\r\n  }\r\n}\r\n\r\n// Monster Bits\r\nclass ArmorClass {\r\n  constructor({ ac, from, condition }) {\r\n    this.ac = ac;\r\n    this.from = from;\r\n    this.condition = condition;\r\n  }\r\n\r\n  get simpleDisplay() {\r\n    var strOut = this.ac;\r\n\r\n    if (this.from) {\r\n      strOut = `${this.ac} (${this.from.join(\", \")})`;\r\n    } else if (this.condition) {\r\n      strOut = `${this.ac} (${this.condition.join(\", \")})`;\r\n    }\r\n\r\n    return strOut;\r\n  }\r\n}\r\n\r\nexport class CreatureType {\r\n  constructor({ type, tags, swarmSize }) {\r\n    this.type = type;\r\n    this.tags = tags || [];\r\n    this.swarmSize = swarmSize;\r\n  }\r\n\r\n  get displayString() {\r\n    let str = this.type;\r\n\r\n    if (this.swarmSize) {\r\n      return `Swarm of ${Monster.stringFromSize(\r\n        this.swarmSize\r\n      ).toLowerCase()} ${this.type}${this.type !== \"undead\" ? \"s\" : \"\"}`;\r\n    }\r\n\r\n    if (this.tags.length > 0) {\r\n      str += ` (${this.tags\r\n        .map((tg) => {\r\n          var tagOut = tg.tag;\r\n          if (tg.prefix) tagOut = tg.prefix + \" \" + tagOut;\r\n          return tagOut;\r\n        })\r\n        .join(\", \")})`;\r\n    }\r\n\r\n    return str;\r\n  }\r\n\r\n  static sortAscending(a, b) {\r\n    let outVal = sortStrAsc(a.type, b.type);\r\n\r\n    if (outVal !== 0) {\r\n      return outVal;\r\n    }\r\n\r\n    outVal = a.tags.length - b.tags.length;\r\n\r\n    if (outVal !== 0) {\r\n      return outVal;\r\n    }\r\n\r\n    for (let i = 0; i < a.tags.length; ++i) {\r\n      outVal = sortStrAsc(a.tags[i].tag, b.tags[i].tag);\r\n\r\n      if (outVal !== 0) {\r\n        return outVal;\r\n      }\r\n    }\r\n\r\n    return 0;\r\n  }\r\n}\r\n\r\nexport class ChallengeRating {\r\n  static sortAscending(a, b) {\r\n    if (a === null) return -1;\r\n    if (b === null) return 1;\r\n\r\n    let out = a.cr - b.cr;\r\n\r\n    if (out !== 0) {\r\n      return out;\r\n    }\r\n\r\n    out = a.lair - b.lair;\r\n\r\n    if (out !== 0) {\r\n      return out;\r\n    }\r\n\r\n    out = a.coven - b.coven;\r\n\r\n    return out;\r\n  }\r\n\r\n  constructor({ cr, lair, coven }) {\r\n    this.cr = cr || null;\r\n    var matches = /\\d+\\/(\\d+)/g.exec(this.cr);\r\n    if (matches !== null && matches.length > 0) {\r\n      this.cr = 1 / Number.parseInt(matches[1]);\r\n    } else this.cr = Number.parseInt(this.cr);\r\n    if (Number.isNaN(this.cr)) {\r\n      this.cr = -1;\r\n    }\r\n    this.lair = lair || null;\r\n    this.coven = coven || null;\r\n  }\r\n\r\n  get displayString() {\r\n    if (this.cr === -1) {\r\n      return \"-\";\r\n    }\r\n\r\n    let crOut = this.cr;\r\n\r\n    if (typeof crOut === \"number\" && crOut < 1 && crOut !== 0) {\r\n      crOut = `1/${1 / crOut}`;\r\n    }\r\n\r\n    if (this.coven !== null) {\r\n      crOut += ` (${this.coven} in coven)`;\r\n    }\r\n\r\n    if (this.lair !== null) {\r\n      crOut += ` (${this.lair} in lair)`;\r\n    }\r\n\r\n    return crOut;\r\n  }\r\n}\r\n\r\nclass HealthBlock {\r\n  constructor({ average, formula }) {\r\n    this.average = average;\r\n    this.formula = formula;\r\n  }\r\n}\r\n\r\nconst SPEED_KEYS = [\"walk\", \"fly\", \"climb\", \"swim\", \"burrow\"];\r\nclass SpeedBlock {\r\n  constructor({ walk, fly, climb, swim, burrow, canHover }) {\r\n    this.walk = walk !== undefined ? new SpeedEntry(walk) : null;\r\n    this.fly = fly !== undefined ? new SpeedEntry(fly) : null;\r\n    this.climb = climb !== undefined ? new SpeedEntry(climb) : null;\r\n    this.swim = swim !== undefined ? new SpeedEntry(swim) : null;\r\n    this.burrow = burrow !== undefined ? new SpeedEntry(burrow) : null;\r\n    this.canHover = canHover !== undefined ? canHover : false;\r\n  }\r\n\r\n  get simpleDisplay() {\r\n    let strOut = SPEED_KEYS.map((val) => {\r\n      if (this[val]) {\r\n        if (val !== \"walk\") return `${val} ${this[val].simpleDisplay}`;\r\n        else return `${this[val].simpleDisplay}`;\r\n      }\r\n      return \"\";\r\n    })\r\n      .filter((spd) => spd)\r\n      .join(\", \");\r\n\r\n    return strOut;\r\n  }\r\n}\r\n\r\nclass SpeedEntry {\r\n  constructor(inObj) {\r\n    if (typeof inObj === \"number\" || inObj === 0) {\r\n      this.ft = inObj;\r\n      this.condition = null;\r\n    } else {\r\n      this.ft = inObj.number;\r\n      this.condition = inObj.condition;\r\n    }\r\n  }\r\n\r\n  get simpleDisplay() {\r\n    if (!this.condition) {\r\n      return `${this.ft} ft.`;\r\n    } else {\r\n      return `${this.ft} ft. ${this.condition}`;\r\n    }\r\n  }\r\n}\r\n\r\nclass StatsBlock {\r\n  constructor({ str, dex, con, int, wis, cha }) {\r\n    this.str = str;\r\n    this.dex = dex;\r\n    this.con = con;\r\n    this.int = int;\r\n    this.wis = wis;\r\n    this.cha = cha;\r\n  }\r\n}\r\n","export class HarvestingTable {\r\n  static fromOld(oldMonster) {\r\n    if (!oldMonster.HarvestingTable.Rows) return null;\r\n\r\n    return new HarvestingTable({\r\n      name: oldMonster.Name,\r\n      rows: oldMonster.HarvestingTable.Rows.map(\r\n        (row) =>\r\n          new HarvestingTableRow({\r\n            difficultyClass: row.DifficultyClass,\r\n            itemNameReference: row.ItemNameRef,\r\n            quantity: row.Quantity,\r\n            notes: row.Notes,\r\n          })\r\n      ),\r\n    });\r\n  }\r\n\r\n  constructor({ name, rows }) {\r\n    this.name = name;\r\n    this.rows = rows.map((r) => new HarvestingTableRow(r));\r\n  }\r\n}\r\n\r\nclass HarvestingTableRow {\r\n  constructor({ difficultyClass, itemNameReference, quantity, notes }) {\r\n    this.difficultyClass = difficultyClass;\r\n    this.itemNameReference = itemNameReference;\r\n    this.quantity = quantity;\r\n    this.notes = notes;\r\n  }\r\n}\r\n","export class TrinketTable {\r\n  static fromOld({ TrinketTableType, Rows }) {\r\n    return new TrinketTable({\r\n      trinketTableType: TrinketTableType,\r\n      rows: Rows.map(\r\n        (row) =>\r\n          new TrinketTableRow({\r\n            d8Roll: row.D8Roll,\r\n            descriptionLine: row.DescriptionLine,\r\n            value: row.ValueGP,\r\n            weight: row.WeightLB,\r\n          })\r\n      ),\r\n    });\r\n  }\r\n\r\n  constructor({ trinketTableType, rows }) {\r\n    this.trinketTableType = trinketTableType;\r\n    this.rows = rows;\r\n  }\r\n}\r\n\r\nclass TrinketTableRow {\r\n  constructor({ d8Roll, descriptionLine, value, weight }) {\r\n    this.d8Roll = d8Roll;\r\n    this.descriptionLine = descriptionLine;\r\n    this.value = value;\r\n    this.weight = weight;\r\n  }\r\n}\r\n","export class CraftableItem {\r\n  static fromOld(oldItem) {\r\n    return new CraftableItem({\r\n      name: oldItem.Name,\r\n      crafter: oldItem.Crafter,\r\n      rarity: oldItem.Rarity,\r\n      requiresAttunement: oldItem.RequiresAttunement,\r\n      description: oldItem.Description,\r\n      materials: oldItem.Materials.map((matRow) => {\r\n        return { componentId: matRow.ComponentId, quantity: matRow.Quantity };\r\n      }),\r\n      type: oldItem.Type,\r\n      materialGrouping: oldItem.MaterialGrouping,\r\n      attunementNote: oldItem.AttunementNote,\r\n    });\r\n  }\r\n\r\n  constructor({\r\n    name,\r\n    crafter,\r\n    rarity,\r\n    requiresAttunement,\r\n    description,\r\n    materials,\r\n    type,\r\n    materialGrouping,\r\n    attunementNote,\r\n  }) {\r\n    this.name = name;\r\n    this.crafter = crafter;\r\n    this.rarity = rarity;\r\n    this.requiresAttunement = requiresAttunement;\r\n    this.description = description;\r\n    this.materials = materials;\r\n    this.type = type;\r\n    this.materialGrouping = materialGrouping;\r\n    this.attunementNote = attunementNote;\r\n  }\r\n\r\n  get id() {\r\n    return this.name.toLowerCase().replace(/\\s+/g, \"_\");\r\n  }\r\n}\r\n","export class HarvestedItem {\r\n  static fromOld(oldItem) {\r\n    return new HarvestedItem({\r\n      name: oldItem.Name,\r\n      value: oldItem.ValueGP,\r\n      weight: oldItem.WeightLB,\r\n      craftingUsage: oldItem.CraftingUsage,\r\n      description: oldItem.Description,\r\n      useText: oldItem.UseText,\r\n      requiredToolNames: oldItem.RequiredToolNames,\r\n    });\r\n  }\r\n\r\n  constructor({\r\n    name,\r\n    value,\r\n    weight,\r\n    craftingUsage,\r\n    description,\r\n    useText,\r\n    requiredToolNames,\r\n  }) {\r\n    this.name = name;\r\n    this.value = value;\r\n    this.weight = weight;\r\n    this.craftingUsage = craftingUsage;\r\n    this.description = description;\r\n    this.useText = useText;\r\n    this.requiredToolNames = requiredToolNames;\r\n  }\r\n\r\n  get id() {\r\n    return this.name.replace(/\\s+/gi, \"_\").replace(/\\//gi, \"-\").toLowerCase();\r\n  }\r\n}\r\n","const TYPES = Object.freeze({\r\n  ADD_MONSTER: \"beastiary/add-monster\",\r\n  ADD_MONSTERS: \"beastiary/add-monsters\",\r\n  ADD_SUB_MONSTER: \"beastiary/add-sub-monster\",\r\n  ADD_SUB_MONSTERS: \"beastiary/add-sub-monsters\",\r\n  SELECT_MONSTER: \"beastiary/select-monster\",\r\n});\r\n\r\nexport default TYPES;\r\n","import TYPES from \"./actionTypes\";\r\n\r\nexport const addMonster = (monster) => ({\r\n  type: TYPES.ADD_MONSTER,\r\n  payload: monster,\r\n});\r\n\r\nexport const addMonsters = (monsters) => ({\r\n  type: TYPES.ADD_MONSTERS,\r\n  payload: monsters,\r\n});\r\n\r\nexport const addSubMonster = (subMonster) => ({\r\n  type: TYPES.ADD_SUB_MONSTER,\r\n  payload: subMonster,\r\n});\r\n\r\nexport const addSubMonsters = (subMonsters) => ({\r\n  type: TYPES.ADD_SUB_MONSTERS,\r\n  payload: subMonsters,\r\n});\r\n\r\nexport const selectMonster = (monsterId) => ({\r\n  type: TYPES.SELECT_MONSTER,\r\n  payload: monsterId,\r\n});\r\n","import TYPES from \"../actionTypes\";\r\n\r\nconst initialState = {\r\n  monsterDict: {},\r\n  subMonsterDict: {},\r\n  selectedMonsterId: \"\",\r\n  previousMonsterId: \"\",\r\n};\r\n\r\nexport default function (state = initialState, action) {\r\n  switch (action.type) {\r\n    case TYPES.SELECT_MONSTER: {\r\n      let selectedMonsterId = action.payload;\r\n\r\n      if (state.selectedMonsterId === selectedMonsterId) {\r\n        if (state.previousMonsterId !== selectedMonsterId) {\r\n          return {\r\n            ...state,\r\n            previousMonsterId: state.selectedMonsterId,\r\n            selectedMonsterId,\r\n          };\r\n        }\r\n        return state;\r\n      }\r\n\r\n      console.log(`${TYPES.SELECT_MONSTER}: ${selectedMonsterId}`);\r\n\r\n      return {\r\n        ...state,\r\n        previousMonsterId: state.selectedMonsterId,\r\n        selectedMonsterId,\r\n      };\r\n    }\r\n    case TYPES.ADD_MONSTER: {\r\n      const { id } = action.payload;\r\n      if (state.monsterDict[id]) {\r\n        return state;\r\n      }\r\n\r\n      let monsterDict = { ...state.monsterDict };\r\n      monsterDict[id] = action.payload;\r\n\r\n      return {\r\n        ...state,\r\n        monsterDict: monsterDict,\r\n      };\r\n    }\r\n    case TYPES.ADD_MONSTERS: {\r\n      const monsters = action.payload;\r\n\r\n      let noChange = true;\r\n      let monsterDict = { ...state.monsterDict };\r\n\r\n      monsters.forEach((mon, idx) => {\r\n        if (monsterDict[mon.id] === undefined) {\r\n          monsterDict[mon.id] = mon;\r\n          noChange = false;\r\n        }\r\n      });\r\n\r\n      if (noChange) {\r\n        return state;\r\n      } else {\r\n        return {\r\n          ...state,\r\n          monsterDict: monsterDict,\r\n        };\r\n      }\r\n    }\r\n    case TYPES.ADD_SUB_MONSTER: {\r\n      const { id } = action.payload;\r\n      if (state.subMonsterDict[id]) {\r\n        return state;\r\n      }\r\n\r\n      let subMonsterDict = { ...state.subMonsterDict };\r\n      subMonsterDict[id] = action.payload;\r\n\r\n      return {\r\n        ...state,\r\n        subMonsterDict: subMonsterDict,\r\n      };\r\n    }\r\n    case TYPES.ADD_SUB_MONSTERS: {\r\n      const monsters = action.payload;\r\n\r\n      let noChange = true;\r\n      let subMonsterDict = { ...state.subMonsterDict };\r\n\r\n      monsters.forEach((mon, idx) => {\r\n        if (subMonsterDict[mon.id] === undefined) {\r\n          subMonsterDict[mon.id] = mon;\r\n          noChange = false;\r\n        }\r\n      });\r\n\r\n      if (noChange) {\r\n        return state;\r\n      } else {\r\n        return {\r\n          ...state,\r\n          subMonsterDict: subMonsterDict,\r\n        };\r\n      }\r\n    }\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n","import { combineReducers } from \"redux\";\r\n\r\nimport monsters from \"./monstersReducer\";\r\n\r\nexport default combineReducers({ monsters });\r\n","import { createStore } from \"redux\";\r\nimport rootReducer from \"./reducers\";\r\n\r\nexport default createStore(rootReducer);\r\n","import Data from \"../data/system-state.json\";\r\nimport Index from \"../data/bestiary/index.json\";\r\nimport { Monster } from \"../data/Monster\";\r\nimport { HarvestingTable } from \"../data/HarvestingTable\";\r\nimport { TrinketTable } from \"../data/TrinketTable\";\r\nimport { CraftableItem } from \"../data/CraftableItem\";\r\nimport { HarvestedItem } from \"../data/HarvestedItem\";\r\nimport { addMonsters, addSubMonsters } from \"../redux/actions\";\r\nimport store from \"../redux/store\";\r\n\r\nconst $ = window.$;\r\n\r\nasync function ajaxJson(fileName) {\r\n  return new Promise((resolve, reject) => {\r\n    $.getJSON(`data/bestiary/${fileName}`, (data) => {\r\n      resolve(data);\r\n    });\r\n  });\r\n}\r\n\r\nasync function Load5eMonsterFile({ key, fileName }) {\r\n  let localKey = key;\r\n\r\n  // check if already processed or already being processed\r\n  if (Storage.processedKeys.includes(localKey.toLowerCase())) {\r\n    if (process.env.NODE_ENV === \"development\") {\r\n      console.log(`[${localKey}] already done.`);\r\n    }\r\n    return;\r\n  } else if (Storage.processingKeys.includes(localKey.toLowerCase())) {\r\n    if (process.env.NODE_ENV === \"development\") {\r\n      console.log(`[${localKey}] being processed.`);\r\n    }\r\n    return;\r\n  }\r\n\r\n  Storage.processingKeys.push(localKey.toLowerCase());\r\n\r\n  console.log(`Starting on key[${localKey.toLowerCase()}]`);\r\n\r\n  var data = await ajaxJson(fileName);\r\n  if (data._meta) {\r\n    var meta = data._meta;\r\n    // await for any dependencies to be loaded in\r\n    if (meta.dependencies && meta.dependencies.monster) {\r\n      for (let jdx = 0; jdx < meta.dependencies.monster.length; ++jdx) {\r\n        var depKey = meta.dependencies.monster[jdx];\r\n        if (process.env.NODE_ENV === \"development\") {\r\n          console.log(\r\n            `Starting on key[${depKey.toLowerCase()}] required as a dependency of [${localKey.toLowerCase()}]`\r\n          );\r\n        }\r\n        await Load5eMonsterFile({\r\n          key: depKey,\r\n          fileName: `bestiary-${depKey.toLowerCase()}.json`,\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  for (let idx = 0; idx < data.monster.length; ++idx) {\r\n    let mon = data.monster[idx];\r\n\r\n    if (mon._copy) {\r\n      // console.log(\r\n      //   `For now, skipping _copy prop monsters ... on ${mon.name}`\r\n      // );\r\n      continue;\r\n    }\r\n\r\n    try {\r\n      mon = Monster.from5eSource(mon);\r\n      if (!Storage.monsterDict[mon.id]) {\r\n        Storage.monsterDict[mon.id] = mon;\r\n      }\r\n    } catch (err) {\r\n      if (process.env.NODE_ENV === \"development\") {\r\n        console.error(\r\n          `Loading on monster: ${mon.name} in file: ${fileName} failed.\\n${err}`\r\n        );\r\n      }\r\n    }\r\n  }\r\n\r\n  // dispatch after each file\r\n  //store.dispatch(addMonsters(foundMonsters));\r\n\r\n  console.log(`${localKey} processed.`);\r\n  Storage.processedKeys.push(localKey.toLowerCase());\r\n}\r\n\r\n// let initialised = false;\r\nconst Storage = {\r\n  _init: false,\r\n\r\n  // dictionaries\r\n  monsterDict: {},\r\n  subStateMonsterDict: {},\r\n  harvestingTableDict: {},\r\n  harvestableItemDict: {},\r\n  trinketTableDict: {},\r\n  craftableItemDict: {},\r\n\r\n  processingKeys: [],\r\n  processedKeys: [],\r\n\r\n  delayedMonsters: [],\r\n\r\n  Init: async () => {\r\n    if (Storage._init) {\r\n      if (process.env.NODE_ENV === \"development\") {\r\n        console.log(\"Storage already initialised\");\r\n      }\r\n      return;\r\n    }\r\n\r\n    for (let key in Index) {\r\n      if (process.env.NODE_ENV === \"development\") {\r\n        console.log(`${key} :: ${Index[key]}`);\r\n      }\r\n\r\n      await Load5eMonsterFile({ key: key, fileName: Index[key] });\r\n    }\r\n\r\n    for (let idx = 0; idx < Data.monsters.length; ++idx) {\r\n      let monster = new SubStateMonster(Data.monsters[idx]);\r\n      Storage.subStateMonsterDict[monster.id] = monster;\r\n    }\r\n\r\n    for (let idx = 0; idx < Data.harvestingTables.length; ++idx) {\r\n      let harvestingTable = new HarvestingTable(Data.harvestingTables[idx]);\r\n      Storage.harvestingTableDict[harvestingTable.name] = harvestingTable;\r\n    }\r\n\r\n    for (let idx = 0; idx < Data.harvestedItems.length; ++idx) {\r\n      let harvestedItem = new HarvestedItem(Data.harvestedItems[idx]);\r\n      Storage.harvestableItemDict[harvestedItem.id] = harvestedItem;\r\n    }\r\n\r\n    for (let idx = 0; idx < Data.trinketTables.length; ++idx) {\r\n      let trinketTable = new TrinketTable(Data.trinketTables[idx]);\r\n      Storage.trinketTableDict[trinketTable.trinketTableType] = trinketTable;\r\n    }\r\n\r\n    for (let idx = 0; idx < Data.craftableItems.length; ++idx) {\r\n      let craftableItem = new CraftableItem(Data.craftableItems[idx]);\r\n      Storage.craftableItemDict[craftableItem.id] = craftableItem;\r\n    }\r\n\r\n    store.dispatch(addSubMonsters(Object.values(Storage.subStateMonsterDict)));\r\n    store.dispatch(addMonsters(Object.values(Storage.monsterDict)));\r\n\r\n    Storage._init = true;\r\n  },\r\n};\r\n\r\nwindow.storage = Storage;\r\nexport default Storage;\r\n\r\nclass SubStateMonster {\r\n  constructor({\r\n    name,\r\n    cardSize,\r\n    source,\r\n    trinketTableType,\r\n    harvestingTableGroup,\r\n  }) {\r\n    this.name = name;\r\n    this.cardSize = cardSize;\r\n    this.source = source;\r\n    this.trinketTableType = trinketTableType;\r\n    this.harvestingTableGroup = harvestingTableGroup;\r\n  }\r\n\r\n  get id() {\r\n    return (\r\n      this.name.replace(/[\\s'\\-()]/g, \"\") +\r\n      \"_\" +\r\n      this.source\r\n    ).toLowerCase();\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport { Container, Col, Row, Form } from \"react-bootstrap\";\r\n\r\nexport function getItemReferenceFromName(name) {\r\n  return name.replace(/\\s+/gi, \"_\").replace(/\\//gi, \"-\").toLowerCase();\r\n}\r\n\r\nexport function getItemReference(harvestedItem) {\r\n  return harvestedItem.id;\r\n}\r\n\r\nfunction simplePassthrough(val) {\r\n  return val;\r\n}\r\n\r\nconst ARRAY_CONC = \";;\";\r\nfunction joinArray(val) {\r\n  return val.join(ARRAY_CONC);\r\n}\r\nfunction splitArray(val) {\r\n  return val.split(ARRAY_CONC);\r\n}\r\n\r\nexport function HarvestedItemDisplay(props) {\r\n  let hItem = props.harvestedItem;\r\n\r\n  return (\r\n    <>\r\n      {/* {JSON.stringify(hItem)} */}\r\n      {/* <Row>\r\n                <Col className=\"col-3 font-weight-bold\">ReferenceId:</Col>\r\n                <Col>{hItem.ReferenceId}</Col>\r\n            </Row> */}\r\n      <Row>\r\n        <Col className=\"col-3 font-weight-bold\">Name:</Col>\r\n        <Col>{hItem.name}</Col>\r\n      </Row>\r\n      <Row>\r\n        <Col className=\"col-3 font-weight-bold\">Value:</Col>\r\n        <Col>{hItem.value}</Col>\r\n      </Row>\r\n      <Row>\r\n        <Col className=\"col-3 font-weight-bold\">Weight:</Col>\r\n        <Col>{hItem.weight}</Col>\r\n      </Row>\r\n      <Row>\r\n        <Col className=\"col-3 font-weight-bold\">Required Tools:</Col>\r\n        <Col>\r\n          {hItem.requiredToolNames.length === 0\r\n            ? \"-\"\r\n            : hItem.requiredToolNames.join(\" and \")}\r\n        </Col>\r\n      </Row>\r\n      <Row>\r\n        <Col className=\"col-3 font-weight-bold\">CraftingUsage:</Col>\r\n        <Col>\r\n          {hItem.craftingUsage.length === 0\r\n            ? \"-\"\r\n            : hItem.craftingUsage.join(\" and \")}\r\n        </Col>\r\n      </Row>\r\n      <Row>\r\n        <Col className=\"col-3 font-weight-bold\">Description:</Col>\r\n        <Col>\r\n          {hItem.description.map((para, idx) => {\r\n            return <p key={idx}>{para}</p>;\r\n          })}\r\n        </Col>\r\n      </Row>\r\n      {hItem.useText.length !== 0 && (\r\n        <Row>\r\n          <Col className=\"col-3 font-weight-bold\">UseText:</Col>\r\n          <Col>\r\n            {hItem.useText.map((para, idx) => {\r\n              return <p key={idx}>{para}</p>;\r\n            })}\r\n          </Col>\r\n        </Row>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n\r\nexport class EditingHarvestedItemDisplay extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.stringKeys = [\r\n      {\r\n        key: \"id\",\r\n        type: \"text\",\r\n        retrieve: simplePassthrough,\r\n        store: simplePassthrough,\r\n      },\r\n      {\r\n        key: \"name\",\r\n        type: \"text\",\r\n        retrieve: simplePassthrough,\r\n        store: simplePassthrough,\r\n      },\r\n      {\r\n        key: \"value\",\r\n        type: \"text\",\r\n        retrieve: simplePassthrough,\r\n        store: simplePassthrough,\r\n      },\r\n      {\r\n        key: \"weight\",\r\n        type: \"text\",\r\n        retrieve: simplePassthrough,\r\n        store: simplePassthrough,\r\n      },\r\n      {\r\n        key: \"craftingUsage\",\r\n        type: \"text\",\r\n        retrieve: joinArray,\r\n        store: splitArray,\r\n      },\r\n      {\r\n        key: \"requiredToolNames\",\r\n        type: \"text\",\r\n        retrieve: joinArray,\r\n        store: splitArray,\r\n      },\r\n      {\r\n        key: \"description\",\r\n        type: \"text\",\r\n        retrieve: joinArray,\r\n        store: splitArray,\r\n      },\r\n      {\r\n        key: \"useText\",\r\n        type: \"text\",\r\n        retrieve: joinArray,\r\n        store: splitArray,\r\n      },\r\n    ];\r\n\r\n    this.state = this.generateStateObject(this.props.harvestedItem);\r\n\r\n    this.applyStateToItem = this.applyStateToItem.bind(this);\r\n  }\r\n\r\n  generateStateObject(harvestedItem) {\r\n    let obj = {};\r\n    for (let i = 0; i < this.stringKeys.length; ++i) {\r\n      let targetValue = harvestedItem[this.stringKeys[i].key];\r\n\r\n      obj[this.stringKeys[i].key] = this.stringKeys[i].retrieve(targetValue);\r\n    }\r\n    return obj;\r\n  }\r\n\r\n  handleInput(event, key) {\r\n    event.preventDefault();\r\n\r\n    console.log(`${key}: ${event.target.value}`);\r\n\r\n    let partialObject = {};\r\n    partialObject[key] = event.target.value;\r\n    this.setState(partialObject);\r\n  }\r\n\r\n  applyStateToItem(event) {\r\n    event.preventDefault();\r\n    console.log(\"applyStateToItem\");\r\n\r\n    for (let i = 0; i < this.stringKeys.length; ++i) {\r\n      let targetValue = this.state[this.stringKeys[i].key];\r\n\r\n      this.props.harvestedItem[this.stringKeys[i].key] = this.stringKeys[\r\n        i\r\n      ].store(targetValue);\r\n    }\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (\r\n      this.props.harvestedItem.ReferenceId !==\r\n      prevProps.harvestedItem.ReferenceId\r\n    ) {\r\n      this.setState(this.generateStateObject(this.props.harvestedItem));\r\n    }\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    let partialObject = {};\r\n    for (let i = 0; i < this.stringKeys.length; ++i) {\r\n      partialObject[this.stringKeys[i]] = \"\";\r\n    }\r\n    this.setState(partialObject);\r\n  }\r\n\r\n  render() {\r\n    let output = [];\r\n\r\n    for (let i = 0; i < this.stringKeys.length; ++i) {\r\n      let key = this.stringKeys[i];\r\n      output.push(\r\n        <Row key={output.length}>\r\n          <Col className=\"col-3 font-weight-bold\">{key.key}: </Col>\r\n          <Col className=\"border\">\r\n            <input\r\n              type={key.type}\r\n              value={this.state[key.key]}\r\n              style={{ width: \"inherit\" }}\r\n              onChange={(e) => {\r\n                e.preventDefault();\r\n                this.handleInput(e, key.key);\r\n              }}\r\n              disabled={key.key === \"ReferenceId\"}\r\n            />\r\n          </Col>\r\n        </Row>\r\n      );\r\n    }\r\n\r\n    return (\r\n      <Container fluid>\r\n        <Form onSubmit={this.applyStateToItem}>\r\n          {output}\r\n          <input type=\"submit\" value=\"Apply Changes\" />\r\n        </Form>\r\n      </Container>\r\n    );\r\n  }\r\n}\r\n","import React, { useState } from \"react\";\r\nimport { matchPath } from \"react-router\";\r\nimport { Col, Row } from \"react-bootstrap\";\r\nimport { DisplayList, DisplayColumn } from \"./DisplayList\";\r\nimport { HarvestedItemFilterBlock } from \"../components/HarvestedItemFilterBlock\";\r\nimport { sortAscending as sortStrAsc } from \"../utility/stringUtil\";\r\nimport Storage from \"../utility/StorageUtil\";\r\nimport {\r\n  EditingHarvestedItemDisplay,\r\n  HarvestedItemDisplay,\r\n  getItemReference,\r\n} from \"../utility/harvestedItemUtil\";\r\n\r\nexport function HarvestedItems(props) {\r\n  let [filterObj, setFilterObj] = useState({});\r\n\r\n  const pathWithId = \"/harvesteditems/:id\";\r\n  let harvestedItem = null;\r\n\r\n  // extract monster id from the path\r\n  let match = matchPath(props.location.pathname, { path: pathWithId });\r\n  let selectedId = \"\";\r\n  if (match !== null) {\r\n    // if there is an id, search for the monster\r\n    selectedId = match.params.id;\r\n    if (Storage.harvestableItemDict[selectedId] !== undefined) {\r\n      harvestedItem = Storage.harvestableItemDict[selectedId];\r\n    }\r\n  }\r\n\r\n  const headers = [\r\n    new DisplayColumn(\r\n      \"Name\",\r\n      (item) => {\r\n        return <>{item[\"name\"]}</>;\r\n      },\r\n      (a, b) => {\r\n        return sortStrAsc(a.name, b.name);\r\n      }\r\n    ),\r\n  ];\r\n\r\n  let harvestedOutput = [\"Select an item from the list\"];\r\n\r\n  if (harvestedItem !== null) {\r\n    if (false && process.env.NODE_ENV === \"development\") {\r\n      harvestedOutput = [\r\n        <EditingHarvestedItemDisplay harvestedItem={harvestedItem} />,\r\n      ];\r\n    } else {\r\n      harvestedOutput = [\r\n        <HarvestedItemDisplay harvestedItem={harvestedItem} />,\r\n      ];\r\n    }\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Row className=\"h-100\" xs={1} md={2}>\r\n        <Col className=\"border h-100\">\r\n          <HarvestedItemFilterBlock submitFilter={setFilterObj} />\r\n          <DisplayList\r\n            headers={headers}\r\n            items={Object.values(Storage.harvestableItemDict)}\r\n            filterObject={filterObj}\r\n            pathRoot={props.match.path}\r\n            idFunction={getItemReference}\r\n            selectedId={selectedId}\r\n          />\r\n        </Col>\r\n        <Col className=\"border scrollableColumn\">{harvestedOutput}</Col>\r\n      </Row>\r\n    </>\r\n  );\r\n}\r\n","import React from \"react\";\r\n// import { fileSaveAs } from \"../utility/saveFile\";\r\n// import Storage from \"../utility/StorageUtil\";\r\n// import { sortAscending } from \"../utility/stringUtil\";\r\n\r\nexport function Home(props) {\r\n  return (\r\n    <div>\r\n      <h1>Home</h1>\r\n      <div>\r\n        {/* <button\r\n          onClick={(e) => {\r\n            e.preventDefault();\r\n\r\n            let monsters = Object.values(Storage.subStateMonsterDict);\r\n            monsters.sort((a, b) => sortAscending(a.id, b.id));\r\n\r\n            let harvestedItems = Object.values(Storage.harvestableItemDict);\r\n            harvestedItems.sort((a, b) => sortAscending(a.id, b.id));\r\n\r\n            let harvestingTables = Object.values(Storage.harvestingTableDict);\r\n            harvestingTables.sort((a, b) => sortAscending(a.name, b.name));\r\n\r\n            let trinketTables = Object.values(Storage.trinketTableDict);\r\n            trinketTables.sort((a, b) =>\r\n              sortAscending(a.trinketTableType, b.trinketTableType)\r\n            );\r\n\r\n            let craftableItems = Object.values(Storage.craftableItemDict);\r\n            craftableItems.sort((a, b) => sortAscending(a.id, b.id));\r\n\r\n            fileSaveAs(\r\n              \"system-state.json\",\r\n              JSON.stringify({\r\n                monsters: monsters,\r\n                harvestingTables: harvestingTables,\r\n                harvestedItems: harvestedItems,\r\n                trinketTables: trinketTables,\r\n                craftableItems: craftableItems,\r\n              })\r\n            );\r\n          }}\r\n        >\r\n          Save State\r\n        </button> */}\r\n      </div>\r\n      {/* <div>\r\n        <input type=\"text\" style={{ width: \"100%\", height: \"4em\" }} />\r\n      </div> */}\r\n      {/* <div>{JSON.stringify(props)}</div> */}\r\n      {/* <div>{JSON.stringify(process.env)}</div> */}\r\n    </div>\r\n  );\r\n}\r\n","export const getMonsterDict = (store) => store.monsters.monsterDict;\r\nexport const getSubMonsterDict = (store) => store.monsters.subMonsterDict;\r\n\r\nexport const getSelectedMonsterId = (store) => store.monsters.selectedMonsterId;\r\nexport const getSelectedMonster = (store) =>\r\n  store.monsters[store.selectedMonsterId];\r\n","export const CARD_SIZES = [\"None\", \"Small\", \"Medium\", \"Large\"];\r\n","import React, { useState } from \"react\";\r\nimport { useHistory } from \"react-router\";\r\nimport { Row, Col } from \"react-bootstrap\";\r\nimport \"./DisplayList.css\";\r\nimport { connect } from \"react-redux\";\r\nimport {\r\n  getMonsterDict,\r\n  getSelectedMonsterId,\r\n  getSubMonsterDict,\r\n} from \"../redux/selectors\";\r\nimport { CARD_SIZES } from \"../data/referenceCardSizes\";\r\nimport { sortAscending as sortStrAsc } from \"../utility/stringUtil\";\r\nimport { ChallengeRating, CreatureType } from \"../data/Monster\";\r\nimport Sources from \"../data/sources.json\";\r\nimport \"./Columnable.css\";\r\nimport \"../LayoutControl/Layout.css\";\r\nimport { selectMonster } from \"../redux/actions\";\r\n\r\nclass DisplayColumn {\r\n  constructor(colDisplay, listDisplayFunc, ascendingSortFunction) {\r\n    this.colDisplay = colDisplay;\r\n    this.listDisplayFunc = listDisplayFunc;\r\n    this.ascendingSortFunction = ascendingSortFunction;\r\n\r\n    this.sortFunc = this.sortFunc.bind(this);\r\n    this.sortAscending = this.sortAscending.bind(this);\r\n    this.sortDescending = this.sortDescending.bind(this);\r\n  }\r\n\r\n  sortFunc(isAscending) {\r\n    return isAscending ? this.sortAscending : this.sortDescending;\r\n  }\r\n\r\n  sortAscending(a, b) {\r\n    return this.ascendingSortFunction(a, b);\r\n  }\r\n\r\n  sortDescending(a, b) {\r\n    return -this.ascendingSortFunction(a, b);\r\n  }\r\n}\r\n\r\nconst listSelector = (store) => ({\r\n  monsterDict: getMonsterDict(store),\r\n  subMonsterDict: getSubMonsterDict(store),\r\n});\r\n\r\nexport default connect(listSelector)(MonsterDisplayList);\r\n\r\nfunction MonsterDisplayList(props) {\r\n  // headers should be a collection of DisplayColumn instances\r\n  let items = Object.values(props.monsterDict);\r\n  let headers = [\r\n    new DisplayColumn(\r\n      \"Name\",\r\n      (item) => {\r\n        return <>{item[\"name\"]}</>;\r\n      },\r\n      (a, b) => {\r\n        return sortStrAsc(a.name, b.name);\r\n      }\r\n    ),\r\n    new DisplayColumn(\r\n      \"Type\",\r\n      (item) => {\r\n        return <>{item[\"type\"].displayString}</>;\r\n      },\r\n      (a, b) => {\r\n        return CreatureType.sortAscending(a.type, b.type);\r\n      }\r\n    ),\r\n    new DisplayColumn(\r\n      \"CR\",\r\n      (item) => {\r\n        return <>{item.challengeRating.displayString}</>;\r\n      },\r\n      (a, b) => {\r\n        return ChallengeRating.sortAscending(\r\n          a.challengeRating,\r\n          b.challengeRating\r\n        );\r\n      }\r\n    ),\r\n    new DisplayColumn(\r\n      \"Card Size\",\r\n      (item) => {\r\n        var subMon = props.subMonsterDict[item.id];\r\n        return <>{subMon ? CARD_SIZES[subMon.cardSize] : \"-\"}</>;\r\n      },\r\n      (a, b) => {\r\n        var subMonA = props.subMonsterDict[a.id];\r\n        var subMonB = props.subMonsterDict[b.id];\r\n\r\n        if (subMonA && subMonB) {\r\n          return subMonA.cardSize - subMonB.cardSize;\r\n        } else if (subMonA && !subMonB) {\r\n          return -1;\r\n        } else if (!subMonA && subMonB) {\r\n          return 1;\r\n        } else {\r\n          // TODO: Fix this\r\n          return -1;\r\n        }\r\n      }\r\n    ),\r\n    new DisplayColumn(\r\n      \"Source\",\r\n      (item) => {\r\n        return <span title={Sources[item[\"source\"]]}>{item[\"source\"]}</span>;\r\n      },\r\n      (a, b) => {\r\n        return sortStrAsc(a.source, b.source);\r\n      }\r\n    ),\r\n  ];\r\n\r\n  let [sortByIdx, setSortByIdx] = useState(0);\r\n  let [sortAscending, setSortAscending] = useState(true);\r\n\r\n  let headerRowContents = [];\r\n  for (let i = 0; i < headers.length; ++i) {\r\n    headerRowContents.push(\r\n      <Col\r\n        key={`dl-h-col-${i}`}\r\n        onClick={(e) => {\r\n          e.preventDefault();\r\n\r\n          if (i === sortByIdx) {\r\n            setSortAscending(!sortAscending);\r\n          } else {\r\n            setSortByIdx(i);\r\n            setSortAscending(true);\r\n          }\r\n        }}\r\n        className={`list-header ${i === sortByIdx && \"active\"}`}\r\n      >\r\n        {headers[i].colDisplay}{\" \"}\r\n        {i === sortByIdx && <>{sortAscending ? \"^\" : \"v\"}</>}\r\n      </Col>\r\n    );\r\n  }\r\n\r\n  let filterObject = props.filterObject;\r\n  let filterKeys = Object.keys(filterObject);\r\n\r\n  for (let i = 0; i < filterKeys.length; ++i) {\r\n    items = items.filter(filterObject[filterKeys[i]]);\r\n  }\r\n\r\n  items.sort(headers[sortByIdx].sortFunc(sortAscending));\r\n\r\n  let contentsRows = [];\r\n  let itemLen = items.length;\r\n  for (let i = 0; i < itemLen; ++i) {\r\n    contentsRows.push();\r\n  }\r\n\r\n  contentsRows = items.map((item, idx) => {\r\n    return (\r\n      <DisplayListRow\r\n        key={`row-${item.id}`}\r\n        headers={headers}\r\n        item={item}\r\n        // idFunction={props.idFunction}\r\n        pathRoot={props.pathRoot}\r\n        //isSelected={props.idFunction(item) === props.selectedId}\r\n      />\r\n    );\r\n  });\r\n\r\n  return (\r\n    <>\r\n      {/* <span>{items.length}</span> */}\r\n      <Row className=\"mx-0\">{headerRowContents}</Row>\r\n      <ul className=\"element-list\">{contentsRows}</ul>\r\n    </>\r\n  );\r\n}\r\n\r\nconst idSelector = (store) => ({\r\n  //selectedMonsterId: getSelectedMonsterId(store),\r\n  selectedMonsterId: getSelectedMonsterId(store),\r\n  previousMonsterId: store.monsters.previousMonsterId,\r\n});\r\n\r\nconst dispatchProps = (disp) => ({\r\n  selectMonster: (monId) => disp(selectMonster(monId)),\r\n});\r\n\r\nconst areMergedPropsEqual = (next, prev) => {\r\n  if (prev.item.id === \"aboleth_mm\") {\r\n    const printMergeProps = (name, props) => {\r\n      console.log(\r\n        `${name}: ${props.item.id} [${JSON.stringify({\r\n          selectedMonsterId: props.selectedMonsterId,\r\n          previousMonsterId: props.previousMonsterId,\r\n        })}]`\r\n      );\r\n      // console.log(\r\n      //   `${name}: ${Object.keys(props)\r\n      //     .map((it) => `[${it}, ${[props[it]]}]`)\r\n      //     .join(\", \")}`\r\n      // );\r\n    };\r\n    printMergeProps(\"next\", next);\r\n    printMergeProps(\"prev\", prev);\r\n  }\r\n\r\n  // return false;\r\n\r\n  let itemChanged = prev.item.id !== next.item.id;\r\n  let selectedChanged = prev.selectedMonsterId !== next.selectedMonsterId;\r\n\r\n  // return (\r\n  //   itemChanged ||\r\n  //   next.item.id === next.selectedMonsterId ||\r\n  //   next.item.id === next.previousMonsterId\r\n  // );\r\n\r\n  if (selectedChanged && itemChanged) {\r\n    return false; // redraw\r\n  } else if (selectedChanged && !itemChanged) {\r\n    // if it equals either, redraw\r\n    return !(\r\n      next.item.id === prev.selectedMonsterId ||\r\n      next.item.id === next.selectedMonsterId\r\n    );\r\n  } else if (!selectedChanged && itemChanged) {\r\n    // if it equals either, redraw\r\n    return !(\r\n      prev.selectedMonsterId === next.item.id ||\r\n      prev.selectedMonsterId === prev.item.id\r\n    );\r\n  } else {\r\n    return true;\r\n  }\r\n};\r\n\r\nconst DisplayListRow = connect(\r\n  idSelector,\r\n  dispatchProps,\r\n  (stateProps, dispatchProps, ownProps) => ({\r\n    ...stateProps,\r\n    ...ownProps,\r\n    ...dispatchProps,\r\n  }),\r\n  {\r\n    pure: true,\r\n    areMergedPropsEqual,\r\n  }\r\n)(function (props) {\r\n  let history = useHistory();\r\n\r\n  let { headers, item, pathRoot, selectedMonsterId } = props;\r\n\r\n  let isSelected = item.id === selectedMonsterId;\r\n\r\n  let innerCols = [\r\n    //  <Col key=\"id\">{selectedMonsterId + \"|\" + item.id}</Col>\r\n  ];\r\n\r\n  let desiredId = item.id;\r\n\r\n  let headerLen = headers.length;\r\n  for (let h = 0; h < headerLen; ++h) {\r\n    let headerObj = headers[h];\r\n\r\n    innerCols.push(\r\n      <Col key={`${desiredId}-${h}`}>{headerObj.listDisplayFunc(item)}</Col>\r\n    );\r\n  }\r\n\r\n  let pathRoute = `${pathRoot}/${desiredId}`;\r\n\r\n  let activeName = isSelected ? \"active\" : \"\";\r\n\r\n  return (\r\n    <li\r\n      onClick={(e) => {\r\n        history.push(pathRoute);\r\n        props.selectMonster(desiredId);\r\n        e.preventDefault();\r\n      }}\r\n      className={activeName}\r\n    >\r\n      <Row>{innerCols}</Row>\r\n    </li>\r\n  );\r\n});\r\n","import React from \"react\";\r\nimport { Container, Row, Col } from \"react-bootstrap\";\r\n\r\nexport function StatBlock(props) {\r\n  let statBlock = props.statBlock;\r\n\r\n  return (\r\n    <>\r\n      <Container className=\"text-center\">\r\n        <Row key=\"head\" className=\"font-weight-bold\">\r\n          <Col>STR</Col>\r\n          <Col>DEX</Col>\r\n          <Col>CON</Col>\r\n          <Col>INT</Col>\r\n          <Col>WIS</Col>\r\n          <Col>CHA</Col>\r\n        </Row>\r\n        <Row key=\"statVals\">\r\n          <Col key=\"str\">\r\n            {statBlock.str} ({getModifierDisplayString(statBlock.str)})\r\n          </Col>\r\n          <Col key=\"dex\">\r\n            {statBlock.dex} ({getModifierDisplayString(statBlock.dex)})\r\n          </Col>\r\n          <Col key=\"con\">\r\n            {statBlock.con} ({getModifierDisplayString(statBlock.con)})\r\n          </Col>\r\n          <Col key=\"int\">\r\n            {statBlock.int} ({getModifierDisplayString(statBlock.int)})\r\n          </Col>\r\n          <Col key=\"wis\">\r\n            {statBlock.wis} ({getModifierDisplayString(statBlock.wis)})\r\n          </Col>\r\n          <Col key=\"cha\">\r\n            {statBlock.cha} ({getModifierDisplayString(statBlock.cha)})\r\n          </Col>\r\n        </Row>\r\n      </Container>\r\n    </>\r\n  );\r\n}\r\n\r\nexport function getModifierDisplayString(stat) {\r\n  let mod = getModifier(stat);\r\n\r\n  if (mod > 0) mod = `+${mod}`;\r\n\r\n  return mod;\r\n}\r\n\r\nexport function getModifier(stat) {\r\n  return Math.floor((stat - 10) / 2);\r\n}\r\n","import React from \"react\";\r\nimport { Container, Row, Col } from \"react-bootstrap\";\r\nimport \"./hamundsTables.css\";\r\n\r\nexport function TrinketTableDisplay(props) {\r\n  let trinketTable = props.trinketTable;\r\n\r\n  if (trinketTable === null || trinketTable === undefined) {\r\n    return <></>;\r\n  }\r\n\r\n  let rowsOut = [];\r\n\r\n  rowsOut.push(\r\n    <Row className=\"text-center font-weight-bold\" key={\"trinketTableHeader\"}>\r\n      <Col className=\"col-1\">D8</Col>\r\n      <Col className=\"text-left\">Description</Col>\r\n      <Col className=\"col-1\">Value</Col>\r\n      <Col className=\"col-1\">Weight</Col>\r\n    </Row>\r\n  );\r\n\r\n  for (let i = 0; i < trinketTable.rows.length; ++i) {\r\n    let row = trinketTable.rows[i];\r\n    rowsOut.push(\r\n      <Row key={`tt-r${i}`}>\r\n        <Col className=\"col-1 text-center\">{row.d8Roll}</Col>\r\n        <Col>{row.descriptionLine}</Col>\r\n        <Col className=\"col-1\">{row.value}</Col>\r\n        <Col className=\"col-1\">{row.weight}</Col>\r\n      </Row>\r\n    );\r\n  }\r\n\r\n  return <Container className=\"hamund-table\">{rowsOut}</Container>;\r\n}\r\n","import React, { useState } from \"react\";\r\nimport { Col, Row } from \"react-bootstrap\";\r\n\r\nexport function ArrayInput(props) {\r\n  let [redraw, setRedraw] = useState(true);\r\n  let propObj = props.object;\r\n  let propKey = props.objKey;\r\n  let defaultInsert = props.defaultInsert;\r\n  if (defaultInsert === undefined) defaultInsert = \"\";\r\n\r\n  const addLine = (e) => {\r\n    propObj[propKey].push(defaultInsert);\r\n    setRedraw(!redraw);\r\n  };\r\n  const insertLine = (e, tarIndex) => {\r\n    propObj[propKey].splice(tarIndex, 0, defaultInsert);\r\n    setRedraw(!redraw);\r\n  };\r\n\r\n  const removeLine = (e, idx) => {\r\n    propObj[propKey].splice(idx, 1);\r\n    setRedraw(!redraw);\r\n  };\r\n\r\n  let arrayLines = [];\r\n  for (let i = 0; i < propObj[propKey].length; ++i) {\r\n    arrayLines.push(\r\n      <Row key={i}>\r\n        <Col className=\"col-2 border\">\r\n          <button\r\n            onClick={(e) => {\r\n              insertLine(e, i);\r\n            }}\r\n            // disabled={i === 0}\r\n          >\r\n            ^\r\n          </button>\r\n          <button\r\n            onClick={(e) => {\r\n              removeLine(e, i);\r\n            }}\r\n          >\r\n            -\r\n          </button>\r\n          <button\r\n            onClick={(e) => {\r\n              insertLine(e, i + 1);\r\n            }}\r\n            // disabled={i === propObj[propKey].length - 1}\r\n          >\r\n            v\r\n          </button>\r\n        </Col>\r\n        <Col>\r\n          <props.subType\r\n            object={propObj}\r\n            objKey={propKey}\r\n            index={i}\r\n            hideLabel={true}\r\n          />\r\n        </Col>\r\n      </Row>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Row>\r\n        <Col className=\"col-3\">\r\n          {propKey}: <button onClick={addLine}>+</button>\r\n        </Col>\r\n      </Row>\r\n\r\n      {arrayLines}\r\n    </>\r\n  );\r\n}\r\n\r\nexport function SelectInput(props) {\r\n  let [redraw, setRedraw] = useState(true);\r\n  let propObj = props.object;\r\n  let propKey = props.objKey;\r\n\r\n  const onChangeFunc = (e) => {\r\n    propObj[propKey] = e.target.value;\r\n    setRedraw(!redraw);\r\n  };\r\n\r\n  let options = props.options.map((opt, idx) => {\r\n    return (\r\n      <option value={opt} key={idx}>\r\n        {opt}\r\n      </option>\r\n    );\r\n  });\r\n\r\n  return (\r\n    <>\r\n      <Row>\r\n        <Col className=\"col-3\">{propKey}: </Col>{\" \"}\r\n        <Col>\r\n          <select\r\n            style={{ width: \"inherit\" }}\r\n            value={propObj[propKey]}\r\n            onChange={onChangeFunc}\r\n          >\r\n            {options}\r\n          </select>\r\n        </Col>\r\n      </Row>\r\n    </>\r\n  );\r\n}\r\n\r\nexport function RadioButtonInput(props) {\r\n  let [redraw, setRedraw] = useState(true);\r\n  let propObj = props.object;\r\n  let propKey = props.objKey;\r\n\r\n  const onChangeFunc = (e) => {\r\n    if (e.target.checked) {\r\n      propObj[propKey] = e.target.value;\r\n      setRedraw(!redraw);\r\n    }\r\n  };\r\n\r\n  let options = props.options.map((opt, idx) => {\r\n    return (\r\n      <div>\r\n        <input\r\n          type=\"radio\"\r\n          value={opt}\r\n          key={idx}\r\n          name={propKey}\r\n          id={opt}\r\n          checked={propObj[propKey] === opt}\r\n          onChange={onChangeFunc}\r\n        />{\" \"}\r\n        <label for={opt}>{opt}</label>\r\n      </div>\r\n    );\r\n  });\r\n\r\n  return (\r\n    <>\r\n      <Row className=\"border\">\r\n        <Col className=\"col-3\">{propKey}: </Col> <Col>{options}</Col>\r\n      </Row>\r\n    </>\r\n  );\r\n}\r\n\r\nexport function StringInput(props) {\r\n  let [redraw, setRedraw] = useState(true);\r\n  let propObj = props.object;\r\n  let propKey = props.objKey;\r\n  let propIdx = props.index;\r\n\r\n  let {\r\n    disabled,\r\n    hideLabel, //, ...otherProps\r\n  } = props;\r\n\r\n  const onChangeFunc = (e) => {\r\n    if (propIdx !== undefined) {\r\n      propObj[propKey][propIdx] = e.target.value;\r\n    } else {\r\n      propObj[propKey] = e.target.value;\r\n    }\r\n    setRedraw(!redraw);\r\n  };\r\n\r\n  let value = propObj[propKey];\r\n  if (propIdx !== undefined) {\r\n    value = propObj[propKey][propIdx];\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Row>\r\n        {!hideLabel && <Col className=\"col-3\">{propKey}: </Col>}\r\n        <Col>\r\n          <input\r\n            type=\"text\"\r\n            style={{ width: \"inherit\" }}\r\n            value={value}\r\n            onChange={onChangeFunc}\r\n            disabled={disabled}\r\n          />\r\n        </Col>\r\n      </Row>\r\n    </>\r\n  );\r\n}\r\n\r\nexport function CheckboxInput(props) {\r\n  let [redraw, setRedraw] = useState(true);\r\n  let propObj = props.object;\r\n  let propKey = props.objKey;\r\n\r\n  const onChangeFunc = (e) => {\r\n    propObj[propKey] = e.target.checked;\r\n    setRedraw(!redraw);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Row>\r\n        <Col className=\"col-3\">{propKey}: </Col>{\" \"}\r\n        <Col>\r\n          <input\r\n            type=\"checkbox\"\r\n            style={{ width: \"inherit\" }}\r\n            onChange={onChangeFunc}\r\n            checked={propObj[propKey] ? \"checked\" : \"\"}\r\n          />\r\n        </Col>\r\n      </Row>\r\n    </>\r\n  );\r\n}\r\n","import React from \"react\";\r\n\r\nexport function ModularDescription(props) {\r\n  let desc = props.description;\r\n\r\n  if (typeof desc === \"string\") {\r\n    return <SimpleDescription description={desc} />;\r\n  } else {\r\n    if (!desc.type) return <>ERROR on: {JSON.stringify(desc)}</>;\r\n    switch (desc.type) {\r\n      case \"list\":\r\n        let style = desc.style;\r\n        return (\r\n          <ListDescription items={desc.lines || desc.items} style={style} />\r\n        );\r\n      case \"item\":\r\n        return <ItemDescription description={desc} />;\r\n      default:\r\n        return <UnhandledDescription description={desc} />;\r\n    }\r\n  }\r\n}\r\n\r\nfunction SimpleDescription(props) {\r\n  return <p>{props.description}</p>;\r\n}\r\n\r\nfunction ItemDescription(props) {\r\n  return (\r\n    <p>\r\n      <b>{props.description.name}</b> {props.description.entry}\r\n    </p>\r\n  );\r\n}\r\n\r\nfunction UnhandledDescription(props) {\r\n  return <p>{JSON.stringify(props.description)}</p>;\r\n}\r\n\r\nfunction ListDescription(props) {\r\n  let output = [];\r\n\r\n  for (let i = 0; i < props.items.length; ++i) {\r\n    output.push(\r\n      <li key={i}>\r\n        <ModularDescription description={props.items[i]} />\r\n      </li>\r\n    );\r\n  }\r\n\r\n  let styleObj = {};\r\n  if (props.style) {\r\n    styleObj.listStyle = props.style;\r\n  }\r\n\r\n  return <ul style={styleObj}>{output}</ul>;\r\n}\r\n","import React from \"react\";\r\nimport { Container, Col, Row } from \"react-bootstrap\";\r\nimport {\r\n  StringInput,\r\n  CheckboxInput,\r\n  SelectInput,\r\n  ArrayInput,\r\n  RadioButtonInput,\r\n} from \"./inputUtil\";\r\nimport Storage from \"./StorageUtil\";\r\nimport { ModularDescription } from \"./descriptionUtil\";\r\n\r\nexport function getIdFromItemName(name) {\r\n  return name.toLowerCase().replace(/\\s+/g, \"_\");\r\n}\r\n\r\nexport function getIdFromItem(item) {\r\n  if (item.id !== undefined) return item.id;\r\n  else return getIdFromItemName(item.name);\r\n}\r\n\r\nexport function CraftableItemDisplay(props) {\r\n  let craftableItem = props.craftableItem;\r\n\r\n  let materialOutput = craftableItem.materials.map((mat, idx) => {\r\n    let matItem = Storage.harvestableItemDict[mat.componentId];\r\n\r\n    return (\r\n      <span key={idx}>\r\n        {matItem ? matItem.name : mat.componentId} ({mat.quantity})\r\n      </span>\r\n    );\r\n  });\r\n  let finalMaterialOutput = [];\r\n  for (let i = 0; i < materialOutput.length; ++i) {\r\n    if (finalMaterialOutput.length !== 0) {\r\n      finalMaterialOutput.push(\" \" + craftableItem.materialGrouping + \" \");\r\n    }\r\n    finalMaterialOutput.push(materialOutput[i]);\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Row>\r\n        <Col className=\"font-weight-bold\">{craftableItem.name}</Col>\r\n      </Row>\r\n      <Row>\r\n        <Col>\r\n          <i>\r\n            {craftableItem.type},{\" \"}\r\n            {(craftableItem.rarity !== null\r\n              ? craftableItem.rarity\r\n              : \"\"\r\n            ).toLowerCase()}{\" \"}\r\n            {craftableItem.requiresAttunement && \"(requires attunement)\"}\r\n          </i>\r\n        </Col>\r\n      </Row>\r\n      <Row>\r\n        <Col>\r\n          <i>\r\n            Crafted by: {finalMaterialOutput} ({craftableItem.crafter})\r\n          </i>\r\n        </Col>\r\n      </Row>\r\n      &nbsp;\r\n      <Row>\r\n        <Col className=\"col-3 font-weight-bold\">Description:</Col>\r\n      </Row>\r\n      <Row>\r\n        <Col>\r\n          {craftableItem.description.length > 0 &&\r\n            craftableItem.description.map((para, idx) => {\r\n              return <ModularDescription key={idx} description={para} />;\r\n            })}\r\n        </Col>\r\n      </Row>\r\n    </>\r\n  );\r\n}\r\n\r\nexport class EditingCraftableItemDisplay extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = this.generateStateObject(this.props.craftableItem);\r\n    this.applyStateToItem = this.applyStateToItem.bind(this);\r\n  }\r\n\r\n  generateStateObject(craftableItem) {\r\n    let obj = {};\r\n    return obj;\r\n  }\r\n\r\n  handleInput(event, key) {\r\n    event.preventDefault();\r\n\r\n    console.log(`${key}: ${event.target.value}`);\r\n\r\n    let partialObject = {};\r\n    partialObject[key] = event.target.value;\r\n    this.setState(partialObject);\r\n  }\r\n\r\n  applyStateToItem(event) {\r\n    event.preventDefault();\r\n\r\n    for (let i = 0; i < this.stringKeys.length; ++i) {\r\n      let targetValue = this.state[this.stringKeys[i].key];\r\n\r\n      this.props.craftableItem[this.stringKeys[i].key] = this.stringKeys[\r\n        i\r\n      ].store(targetValue);\r\n    }\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (this.props.craftableItem.Id !== prevProps.craftableItem.Id) {\r\n      this.setState(this.generateStateObject(this.props.craftableItem));\r\n    }\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    let partialObject = {};\r\n    this.setState(partialObject);\r\n  }\r\n\r\n  render() {\r\n    let craftableItem = this.props.craftableItem;\r\n\r\n    return (\r\n      <Container fluid>\r\n        {/* <div>propObj :: {JSON.stringify(craftableItem)}</div> */}\r\n        <StringInput object={craftableItem} objKey=\"Id\" disabled />\r\n        <StringInput object={craftableItem} objKey=\"Name\" />\r\n        <StringInput object={craftableItem} objKey=\"Type\" />\r\n        <Row>\r\n          <Col>\r\n            <CheckboxInput object={craftableItem} objKey=\"RequiresAttunement\" />\r\n          </Col>\r\n          <Col>\r\n            <StringInput\r\n              object={craftableItem}\r\n              objKey=\"AttunementNote\"\r\n              hideLabel={true}\r\n            />\r\n          </Col>\r\n        </Row>\r\n        <Row>\r\n          <Col>\r\n            <RadioButtonInput // SelectInput\r\n              object={craftableItem}\r\n              objKey=\"Crafter\"\r\n              options={[\r\n                \"Alchemist\",\r\n                \"Artificer\",\r\n                \"Blacksmith\",\r\n                \"Leatherworker\",\r\n                \"Tinker\",\r\n                \"Thaumaturge\",\r\n              ]}\r\n            />\r\n          </Col>\r\n          <Col>\r\n            <RadioButtonInput //SelectInput\r\n              object={craftableItem}\r\n              objKey=\"Rarity\"\r\n              options={[\r\n                \"Mundane\",\r\n                \"Common\",\r\n                \"Uncommon\",\r\n                \"Rare\",\r\n                \"Very Rare\",\r\n                \"Legendary\",\r\n                \"Mixed\",\r\n              ]}\r\n            />\r\n          </Col>\r\n        </Row>\r\n        <ArrayInput\r\n          object={craftableItem}\r\n          objKey=\"Description\"\r\n          subType={StringInput}\r\n        />\r\n        <SelectInput\r\n          object={craftableItem}\r\n          objKey=\"MaterialGrouping\"\r\n          options={[\"OR\", \"AND\"]}\r\n        />\r\n        <ArrayInput\r\n          object={craftableItem}\r\n          objKey=\"Materials\"\r\n          subType={MaterialInput}\r\n          defaultInsert={{ ComponentId: \"\", Quantity: \"\" }}\r\n        />\r\n      </Container>\r\n    );\r\n  }\r\n}\r\n\r\nfunction MaterialInput(props) {\r\n  //   let [redraw, setRedraw] = useState(true);\r\n  let propObj = props.object;\r\n  let propKey = props.objKey;\r\n  let propIdx = props.index;\r\n\r\n  // const onChangeFunc = (e) => {\r\n  //     if (propIdx !== undefined) {\r\n  //         propObj[propKey][propIdx] = e.target.value;\r\n  //     } else {\r\n  //         propObj[propKey] = e.target.value;\r\n  //     }\r\n  //     setRedraw(!redraw);\r\n  // };\r\n\r\n  return (\r\n    <>\r\n      <StringInput object={propObj[propKey][propIdx]} objKey=\"ComponentId\" />\r\n      <StringInput object={propObj[propKey][propIdx]} objKey=\"Quantity\" />\r\n    </>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { Container, Row, Col } from \"react-bootstrap\";\r\nimport Storage from \"../utility/StorageUtil\";\r\nimport { getIdFromItemName } from \"./craftableItemUtil\";\r\nimport \"./hamundsTables.css\";\r\nimport { NavLink } from \"reactstrap\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nexport function HarvestingTableDisplay(props) {\r\n  let challengeRating = props.challengeRating;\r\n  let creatureType = props.creatureType;\r\n  let harvestingTable = props.harvestingTable;\r\n\r\n  if (!harvestingTable) return <></>;\r\n\r\n  let rowsOut = [];\r\n\r\n  // rowsOut.push(<>{JSON.stringify(harvestingTable)}</>);\r\n\r\n  rowsOut.push(\r\n    <Row className=\"text-center hamund-header\" key={-1}>\r\n      <Col className=\"col-1\">DC</Col>\r\n      <Col className=\"col-2 text-left\">Item</Col>\r\n      <Col className=\"\">Description</Col>\r\n      <Col className=\"col-1\">Value</Col>\r\n      <Col className=\"col-1\">Weight</Col>\r\n      <Col className=\"col-2\">Crafting</Col>\r\n    </Row>\r\n  );\r\n\r\n  for (let i = 0; i < harvestingTable.rows.length; ++i) {\r\n    let row = harvestingTable.rows[i];\r\n\r\n    let item = Storage.harvestableItemDict[row.itemNameReference];\r\n\r\n    let nameOut = row.itemNameReference;\r\n    let descriptionOut = [];\r\n    let valueOut = \"\";\r\n    let weightOut = \"\";\r\n    let craftingOut = [];\r\n\r\n    if (item !== null && item !== undefined) {\r\n      nameOut = item.name;\r\n\r\n      let lines = 0;\r\n\r\n      for (let j = 0; j < item.description.length; ++j) {\r\n        descriptionOut.push(<p key={lines++}>{item.description[j]}</p>);\r\n      }\r\n\r\n      // output tools, if any\r\n      if (\r\n        item.requiredToolNames !== undefined &&\r\n        item.requiredToolNames.length > 0\r\n      ) {\r\n        descriptionOut.push(\r\n          <p key={lines++} className=\"font-weight-bold\">\r\n            Requires {item.requiredToolNames.join(\" and \").toLowerCase()}.\r\n          </p>\r\n        );\r\n      }\r\n\r\n      for (let j = 0; j < item.useText.length; ++j) {\r\n        descriptionOut.push(\r\n          <p key={lines++}>\r\n            {j === 0 && <b>Use: </b>} {item.useText[j]}\r\n          </p>\r\n        );\r\n      }\r\n\r\n      valueOut = item.value;\r\n      weightOut = item.weight;\r\n\r\n      // craftingOut = item.CraftingUsage.join(\" or \");\r\n      for (let k = 0; k < item.craftingUsage.length; ++k) {\r\n        if (craftingOut.length !== 0) {\r\n          craftingOut.push(<span key={\"or-\" + k}> or </span>);\r\n        }\r\n        craftingOut.push(\r\n          <NavLink\r\n            key={k}\r\n            tag={Link}\r\n            to={`/craftableitems/${getIdFromItemName(item.craftingUsage[k])}`}\r\n          >\r\n            {item.craftingUsage[k]}\r\n          </NavLink>\r\n        );\r\n      }\r\n    }\r\n\r\n    if (row.quantity !== \"\") {\r\n      nameOut += ` (${row.quantity})`;\r\n    }\r\n    if (row.notes !== \"\") {\r\n      nameOut += ` (${row.notes})`;\r\n    }\r\n\r\n    rowsOut.push(\r\n      <Row key={i} className=\"hamund-row\">\r\n        <Col className=\"col-1 text-center\">{row.difficultyClass}</Col>\r\n        <Col className=\"col-2\">{nameOut}</Col>\r\n        <Col className=\"\">{descriptionOut}</Col>\r\n        <Col className=\"col-1\">{valueOut}</Col>\r\n        <Col className=\"col-1\">{weightOut}</Col>\r\n        <Col className=\"col-2\">{craftingOut}</Col>\r\n      </Row>\r\n    );\r\n  }\r\n\r\n  let skill = \"\";\r\n\r\n  switch (creatureType.type) {\r\n    case \"aberration\":\r\n    case \"celestial\":\r\n    case \"elemental\":\r\n    case \"fey\":\r\n    case \"fiend\":\r\n    case \"undead\":\r\n      skill = \"Arcana\";\r\n      break;\r\n    case \"beast\":\r\n    case \"dragon\":\r\n    case \"monstrosity\":\r\n    case \"plant\":\r\n      skill = \"Nature\";\r\n      break;\r\n    case \"construct\":\r\n    case \"ooze\":\r\n      skill = \"Investigation\";\r\n      break;\r\n    case \"giant\":\r\n    case \"humanoid\":\r\n      skill = \"Medicine\";\r\n      break;\r\n    default:\r\n      skill = \"[\" + creatureType.type + \"]\";\r\n      break;\r\n  }\r\n\r\n  let apprasialTarget = \"unknown\";\r\n\r\n  if (challengeRating !== null) {\r\n    apprasialTarget = 8 + challengeRating.cr;\r\n  }\r\n\r\n  return (\r\n    <Container>\r\n      <Row>\r\n        <b>Relevant skill:</b>&nbsp;{skill}\r\n      </Row>\r\n      <Row>\r\n        <b>Appraisal Target:</b>&nbsp;{apprasialTarget}\r\n      </Row>\r\n      <div className=\"border\" />\r\n      <Container className=\"hamund-table\">{rowsOut}</Container>\r\n    </Container>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { stripTags } from \"../utility/stringUtil\";\r\n\r\nexport function DynamicRender(props) {\r\n  let toRender = props.toRender;\r\n  let { name, entries, type } = toRender;\r\n\r\n  if (typeof toRender === \"string\") {\r\n    return <>{stripTags(toRender)}</>;\r\n  }\r\n\r\n  if (type === undefined) {\r\n    return (\r\n      <div>\r\n        {entries.map((ent, idx) => {\r\n          return (\r\n            <div key={idx}>\r\n              {idx === 0 && (\r\n                <>\r\n                  <b>{stripTags(name)}.</b>{\" \"}\r\n                </>\r\n              )}\r\n              <DynamicRender toRender={ent} />\r\n            </div>\r\n          );\r\n        })}\r\n      </div>\r\n    );\r\n  } else {\r\n    switch (type) {\r\n      case \"list\":\r\n        return <ListRender list={toRender} />;\r\n      case \"item\":\r\n        return <ItemRender item={toRender} />;\r\n      default:\r\n        return <>[UNH {type} UNH]</>;\r\n    }\r\n  }\r\n}\r\n\r\nfunction ListRender(props) {\r\n  let {\r\n    //type,\r\n    style,\r\n    items,\r\n    //...others\r\n  } = props.list;\r\n\r\n  return (\r\n    <ul className={style}>\r\n      {items.map((it, idx) => (\r\n        <DynamicRender toRender={it} key={idx} />\r\n      ))}\r\n    </ul>\r\n  );\r\n}\r\n\r\nfunction ItemRender(props) {\r\n  let {\r\n    //type,\r\n    name,\r\n    entry,\r\n    //...others\r\n  } = props.item;\r\n\r\n  return (\r\n    <li>\r\n      <b>{stripTags(name)}</b> {stripTags(entry)}\r\n    </li>\r\n  );\r\n}\r\n\r\nexport function SpellcastingBlock(props) {\r\n  var entry = props.spellcasting;\r\n\r\n  var { name, headerEntries, spells, will, daily, footerEntries } = entry;\r\n\r\n  var output = [];\r\n  var idx = 0;\r\n  if (headerEntries && headerEntries.length > 0) {\r\n    output.push(\r\n      <div key={\"header\"}>\r\n        {headerEntries.map((head, idx) => {\r\n          if (idx === 0) {\r\n            return (\r\n              <div key={idx}>\r\n                <b>{stripTags(name)}.</b> {stripTags(head)}\r\n              </div>\r\n            );\r\n          } else {\r\n            return <div key={idx}>{stripTags(head)}</div>;\r\n          }\r\n        })}\r\n      </div>\r\n    );\r\n    //   for (idx = 0; idx < headerEntries.length; ++idx) {\r\n    //     if (idx === 0) {\r\n    //       output.push(\r\n    //         <div key={idx}>\r\n    //           <b>{stripTags(name)}.</b> {stripTags(headerEntries[idx])}\r\n    //         </div>\r\n    //       );\r\n    //     } else {\r\n    //       output.push(<div key={idx}>{stripTags(headerEntries[idx])}</div>);\r\n    //     }\r\n    //   }\r\n    // } else {\r\n    //   output.push(\r\n    //     <div key={\"header\"}>\r\n    //       <b>{stripTags(name)}.</b>\r\n    //     </div>\r\n    //   );\r\n  }\r\n\r\n  if (will && will.length > 0) {\r\n    output.push(\r\n      <div key={\"will\"}>\r\n        <i>At will:</i> {will.map(stripTags).join(\", \")}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (daily) {\r\n    let dailyKeys = Object.keys(daily);\r\n\r\n    for (idx = 0; idx < dailyKeys.length; ++idx) {\r\n      let [num, each] = dailyKeys[idx].split(\"\");\r\n      let lead = `${num}/day${each ? \" each\" : \"\"}`;\r\n\r\n      output.push(\r\n        <div key={\"daily\"}>\r\n          <i>{lead}:</i> {daily[dailyKeys[idx]].map(stripTags).join(\", \")}\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n  if (spells) {\r\n    let spellKeys = Object.keys(spells);\r\n    let spellsBlock = spells;\r\n\r\n    for (idx = 0; idx < spellKeys.length; ++idx) {\r\n      let { slots, spells } = spellsBlock[spellKeys[idx]];\r\n\r\n      let numCount = \"\";\r\n      if (slots !== undefined) {\r\n        numCount = `${slots} slot${Number.parseInt(slots) > 1 ? \"s\" : \"\"}`;\r\n      } else {\r\n        numCount = \"at will\";\r\n      }\r\n\r\n      let spellLevel = Number.parseInt(spellKeys[idx]);\r\n      if (spellLevel === 0) {\r\n        spellLevel = \"Cantrips\";\r\n      } else if (spellLevel >= 4) {\r\n        spellLevel = `${spellLevel}th level`;\r\n      } else if (spellLevel === 1) {\r\n        spellLevel = `${spellLevel}st level`;\r\n      } else if (spellLevel === 2) {\r\n        spellLevel = `${spellLevel}nd level`;\r\n      } else if (spellLevel === 3) {\r\n        spellLevel = `${spellLevel}rd level`;\r\n      }\r\n\r\n      let lead = `${spellLevel} (${numCount}): `;\r\n\r\n      output.push(\r\n        <div key={`spells-${idx}`}>\r\n          <i>{lead}</i>\r\n          {spells.map(stripTags).join(\", \")}\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n  if (footerEntries && footerEntries.length > 0) {\r\n    output.push(\r\n      <div key=\"footer\">\r\n        {footerEntries.map((foot, idx) => {\r\n          return <div key={idx}>{stripTags(foot)}</div>;\r\n        })}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return <div key={name}>{output}</div>;\r\n}\r\n","import React, { useState } from \"react\";\r\nimport { StatBlock } from \"../utility/statsUtil\";\r\nimport { Tabs, Tab, Row, Col } from \"react-bootstrap\";\r\nimport { CARD_SIZES } from \"../data/referenceCardSizes\";\r\nimport Storage from \"../utility/StorageUtil\";\r\nimport { TrinketTableDisplay } from \"../utility/trinketTableUtil\";\r\nimport { HarvestingTableDisplay } from \"../utility/harvestingTableUtil\";\r\nimport { stripTags } from \"../utility/stringUtil\";\r\nimport { DynamicRender, SpellcastingBlock } from \"./RenderBlocks\";\r\nimport { stringFromSize } from \"../utility/monsterUtil\";\r\nimport Sources from \"../data/sources.json\";\r\n\r\nimport { connect } from \"react-redux\";\r\nimport { getMonsterDict, getSubMonsterDict } from \"../redux/selectors\";\r\n\r\nconst COMBAT_TAB_KEY = \"combat\";\r\nconst TABLES_TAB_KEY = \"tables\";\r\n\r\nconst HARVESTING_TAB_KEY = \"harvesting\";\r\nconst TRINKET_TAB_KEY = \"trinkets\";\r\n\r\nfunction MonsterDisplay(props) {\r\n  let [tabKey, setTabKey] = useState(COMBAT_TAB_KEY);\r\n  let [tablesTabKey, setTablesTabKey] = useState(HARVESTING_TAB_KEY);\r\n  let monster = props.monster;\r\n\r\n  if (monster === null) {\r\n    return (\r\n      <>\r\n        <div>Select an item from the list to see stats ...</div>\r\n      </>\r\n    );\r\n  }\r\n\r\n  let nameOut = monster.name;\r\n  let typeOut = monster.type.displayString;\r\n\r\n  let subMonster = Storage.subStateMonsterDict[monster.id];\r\n\r\n  let cardSize = subMonster ? CARD_SIZES[subMonster.cardSize] : \"-\";\r\n\r\n  let traitsAndSpellcastingOut = [];\r\n  monster.traits.forEach((entry, i) => {\r\n    traitsAndSpellcastingOut.push(<DynamicRender toRender={entry} key={i} />);\r\n  });\r\n  monster.spellcasting.forEach((entry, i) => {\r\n    traitsAndSpellcastingOut.push(\r\n      <SpellcastingBlock\r\n        spellcasting={entry}\r\n        key={entry.name ? entry.name : i}\r\n      />\r\n    );\r\n  });\r\n  if (traitsAndSpellcastingOut.length > 0) {\r\n    traitsAndSpellcastingOut.push(\r\n      <div key=\"traitsBorder\" className=\"border\" />\r\n    );\r\n  }\r\n\r\n  let actionsOut = [];\r\n  monster.actions.forEach((entry, i) => {\r\n    actionsOut.push(<DynamicRender toRender={entry} key={i} />);\r\n  });\r\n  if (actionsOut.length > 0) {\r\n    actionsOut.push(<div key=\"actionBorder\" className=\"border\" />);\r\n  }\r\n\r\n  let reactionsOut = [];\r\n  monster.reactions.forEach((entry, i) => {\r\n    reactionsOut.push(<DynamicRender toRender={entry} key={i} />);\r\n  });\r\n  if (reactionsOut.length > 0) {\r\n    reactionsOut.push(<div key=\"reactionBorder\" className=\"border\" />);\r\n  }\r\n\r\n  let harvestingTable =\r\n    subMonster !== undefined && subMonster.harvestingTableGroup !== null\r\n      ? Storage.harvestingTableDict[subMonster.harvestingTableGroup]\r\n      : null;\r\n  let trinketTable =\r\n    subMonster !== undefined && subMonster.trinketTableType !== null\r\n      ? Storage.trinketTableDict[subMonster.trinketTableType]\r\n      : null;\r\n\r\n  let hasHarvestingTable = harvestingTable !== null;\r\n  let hasTrinketTable = trinketTable !== null;\r\n\r\n  let hasTables = hasHarvestingTable || hasTrinketTable;\r\n\r\n  if (!hasTables) {\r\n    if (tabKey === TABLES_TAB_KEY) {\r\n      tabKey = COMBAT_TAB_KEY;\r\n    }\r\n  } else {\r\n    if (!hasHarvestingTable && tablesTabKey === HARVESTING_TAB_KEY) {\r\n      tablesTabKey = TRINKET_TAB_KEY;\r\n    } else if (!hasTrinketTable && tablesTabKey === TRINKET_TAB_KEY) {\r\n      tablesTabKey = HARVESTING_TAB_KEY;\r\n    }\r\n  }\r\n  //tabKey = COMBAT_TAB_KEY;\r\n\r\n  let otherSourcesOut = monster.otherSources.map((oSrc, idx) => {\r\n    let line = (\r\n      <span key={idx} title={Sources[oSrc.source]}>\r\n        {oSrc.source}\r\n      </span>\r\n    );\r\n    if (idx !== 0) {\r\n      return [<span key={idx + \",\"}>{\", \"}</span>, line];\r\n    } else {\r\n      return line;\r\n    }\r\n  });\r\n\r\n  return (\r\n    <>\r\n      <Row>\r\n        <Col sm=\"9\">\r\n          <h4>{nameOut}</h4>\r\n          <div>\r\n            <i>\r\n              {stringFromSize(monster.size)} {typeOut}\r\n              {monster.alignment.length && (\r\n                <span>\r\n                  ,{\" \"}\r\n                  {monster.alignment\r\n                    .map((ali) => ali.convertedString)\r\n                    .join(\" or \")}\r\n                </span>\r\n              )}\r\n            </i>\r\n          </div>\r\n          <div>\r\n            <b>Card Size: </b>\r\n            {cardSize}\r\n          </div>\r\n        </Col>\r\n        <Col className=\"text-right\">\r\n          <div>\r\n            <b>Source</b>\r\n            <div title={Sources[monster.source]}>{monster.source}</div>\r\n            {otherSourcesOut.length > 0 && <i>{otherSourcesOut}</i>}\r\n          </div>\r\n        </Col>\r\n      </Row>\r\n      <Tabs activeKey={tabKey} onSelect={(k) => setTabKey(k)}>\r\n        <Tab eventKey={COMBAT_TAB_KEY} title=\"Combat\">\r\n          <div>\r\n            <ACHPSpeed monster={monster} />\r\n          </div>\r\n          <div>\r\n            <StatBlock statBlock={monster.stats} />\r\n          </div>\r\n          <div className=\"border\" />\r\n          <div>\r\n            <SkillsAndSavesBlock monster={monster} />\r\n          </div>\r\n          {traitsAndSpellcastingOut}\r\n          {actionsOut}\r\n          {reactionsOut}\r\n        </Tab>\r\n        <Tab eventKey={TABLES_TAB_KEY} title=\"Tables\" disabled={!hasTables}>\r\n          <Tabs activeKey={tablesTabKey} onSelect={(k) => setTablesTabKey(k)}>\r\n            <Tab\r\n              eventKey={HARVESTING_TAB_KEY}\r\n              title=\"Harvesting\"\r\n              disabled={!hasHarvestingTable}\r\n            >\r\n              {\r\n                <HarvestingTableDisplay\r\n                  challengeRating={monster.challengeRating}\r\n                  creatureType={monster.type}\r\n                  harvestingTable={harvestingTable}\r\n                />\r\n              }\r\n              {/* {JSON.stringify(monster.HarvestingTable)} */}\r\n            </Tab>\r\n            <Tab\r\n              eventKey={TRINKET_TAB_KEY}\r\n              title=\"Trinkets\"\r\n              disabled={!hasTrinketTable}\r\n            >\r\n              <TrinketTableDisplay trinketTable={trinketTable} />\r\n            </Tab>\r\n          </Tabs>\r\n        </Tab>\r\n      </Tabs>\r\n      {/* <div className=\"border\" /> */}\r\n      {/* {JSON.stringify(monster)} */}\r\n    </>\r\n  );\r\n}\r\n\r\nfunction ACHPSpeed(props) {\r\n  let monster = props.monster;\r\n  let topBlock = [];\r\n\r\n  let acOut = (\r\n    <>\r\n      {monster.armorClass\r\n        .map((ac) => {\r\n          if (ac.from) {\r\n            return ac.ac + \" (\" + ac.from.map(stripTags).join(\", \") + \")\";\r\n          } else if (ac.condition) {\r\n            return ac.ac + \" \" + stripTags(ac.condition);\r\n          } else return ac.ac;\r\n        })\r\n        .join(\", \")}\r\n    </>\r\n  );\r\n  topBlock.push(\r\n    <div key=\"ac\">\r\n      <b>AC:</b> {acOut}\r\n    </div>\r\n  );\r\n  let hpOut = (\r\n    <>\r\n      {monster.health.average} ({monster.health.formula})\r\n    </>\r\n  );\r\n  topBlock.push(\r\n    <div key=\"hp\">\r\n      <b>Health:</b> {hpOut}\r\n    </div>\r\n  );\r\n  let speedOut = <>{monster.speed.simpleDisplay}</>;\r\n  topBlock.push(\r\n    <div key=\"speed\">\r\n      <b>Speed:</b> {speedOut}\r\n    </div>\r\n  );\r\n  topBlock.push(<div key=\"borderTop\" className=\"border\" />);\r\n\r\n  return <>{topBlock}</>;\r\n}\r\n\r\nfunction SkillsAndSavesBlock(props) {\r\n  let monster = props.monster;\r\n\r\n  // let testFunction = function (mon) {\r\n  //   return JSON.stringify(mon[this.key]);\r\n  // };\r\n  let keyValueFunction = function (mon) {\r\n    return Object.keys(mon[this.key])\r\n      .map((inKey) => inKey + \" \" + mon[this.key][inKey])\r\n      .join(\", \");\r\n  };\r\n  let simpleJoinFunction = function (mon) {\r\n    return mon[this.key].join(\", \");\r\n  };\r\n  const SSE_PAIRS = [\r\n    {\r\n      key: \"saves\",\r\n      header: \"Saving Throws\",\r\n      disp: keyValueFunction,\r\n    },\r\n    {\r\n      key: \"skills\",\r\n      header: \"Skills\",\r\n      disp: keyValueFunction,\r\n    },\r\n    {\r\n      key: \"resistances\",\r\n      header: \"Resistances\",\r\n      disp: simpleJoinFunction,\r\n    },\r\n    {\r\n      key: \"immunity\",\r\n      header: \"Immunities\",\r\n      disp: simpleJoinFunction,\r\n    },\r\n    {\r\n      key: \"conditionImmunities\",\r\n      header: \"Condition Immunities\",\r\n      disp: simpleJoinFunction,\r\n    },\r\n    {\r\n      key: \"languages\",\r\n      header: \"Languages\",\r\n      disp: simpleJoinFunction,\r\n    },\r\n    {\r\n      key: \"senses\",\r\n      header: \"Senses\",\r\n      disp: function (mon) {\r\n        return (\r\n          mon[this.key].join(\", \") + \", passive Perception \" + mon.passivePerc\r\n        );\r\n      },\r\n    },\r\n  ];\r\n  let skillsSavesEtcOut = [];\r\n  SSE_PAIRS.forEach((pair) => {\r\n    if (monster[pair.key]) {\r\n      skillsSavesEtcOut.push(\r\n        <div key={pair.key}>\r\n          <b>{pair.header}: </b>\r\n          {pair.disp(monster)}\r\n        </div>\r\n      );\r\n    }\r\n  });\r\n  skillsSavesEtcOut.push(\r\n    <div key=\"cr\">\r\n      <b>Challenge Rating: </b>\r\n      {monster.challengeRating.displayString}\r\n    </div>\r\n  );\r\n  if (skillsSavesEtcOut.length > 0) {\r\n    skillsSavesEtcOut.push(<div key=\"border\" className=\"border\" />);\r\n  }\r\n\r\n  return <>{skillsSavesEtcOut}</>;\r\n}\r\n\r\nconst monstersSelector = (state) => ({\r\n  monsterDict: getMonsterDict(state),\r\n  subMonsterDict: getSubMonsterDict(state),\r\n});\r\n\r\nexport default connect(monstersSelector)(MonsterDisplay);\r\n","export function getIdFromMonster(monster) {\r\n  let idReplaceRegex = /[\\s'\\-()]/g;\r\n  return (\r\n    monster.name.replace(idReplaceRegex, \"\") +\r\n    \"_\" +\r\n    monster.source\r\n  ).toLowerCase();\r\n}\r\n\r\nexport function stringFromSize(size) {\r\n  switch (size) {\r\n    case \"T\":\r\n      return \"Tiny\";\r\n    case \"S\":\r\n      return \"Small\";\r\n    case \"M\":\r\n      return \"Medium\";\r\n    case \"L\":\r\n      return \"Large\";\r\n    case \"H\":\r\n      return \"Huge\";\r\n    case \"G\":\r\n      return \"Gargantuan\";\r\n    default:\r\n      return `?[${size}]?`;\r\n  }\r\n}\r\n","import React, { useState } from \"react\";\r\nimport { matchPath } from \"react-router\";\r\nimport { Col, Row } from \"react-bootstrap\";\r\nimport { DisplayList, DisplayColumn } from \"./DisplayList\";\r\nimport MonsterDisplayList from \"./MonsterDisplayList\";\r\nimport Storage from \"../utility/StorageUtil\";\r\nimport { sortAscending as sortStrAsc } from \"../utility/stringUtil\";\r\nimport { ChallengeRating, CreatureType } from \"../data/Monster\";\r\nimport MonsterDisplay from \"../components/MonsterDisplay\";\r\n\r\nimport { CARD_SIZES } from \"../data/referenceCardSizes\";\r\nimport { MonsterFilterBlock } from \"../components/MonsterFilterBlock\";\r\nimport \"./Columnable.css\";\r\nimport \"../LayoutControl/Layout.css\";\r\nimport Sources from \"../data/sources.json\";\r\n\r\nimport { connect } from \"react-redux\";\r\nimport { getMonsterDict, getSubMonsterDict } from \"../redux/selectors\";\r\nimport { selectMonster } from \"../redux/actions\";\r\n\r\nfunction Monsters(props) {\r\n  //let [filterObj, setFilterObj] = useState({});\r\n\r\n  const pathWithId = \"/monsters/:id\";\r\n  let monster = null;\r\n\r\n  // extract monster id from the path\r\n  let match = matchPath(props.location.pathname, { path: pathWithId });\r\n  let selectedId = \"\";\r\n  if (match !== null) {\r\n    // if there is an id, search for the monster\r\n    selectedId = match.params.id;\r\n    //props.selectMonster(selectedId);\r\n    if (props.monsterDict[selectedId] !== undefined) {\r\n      monster = props.monsterDict[selectedId];\r\n    }\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Row className=\"h-100\" xs={1} md={2}>\r\n        <Col className=\"border h-100\">\r\n          {/* <MonsterFilterBlock submitFilter={setFilterObj} /> */}\r\n          <MonsterDisplayList\r\n            //filterObject={filterObj}\r\n            filterObject={{}}\r\n            pathRoot={props.match.path}\r\n            //idFunction={(mon) => mon.id}\r\n            //selectedId={selectedId}\r\n          />\r\n        </Col>\r\n        <Col className=\"border scrollableColumn\">\r\n          <MonsterDisplay\r\n            monster={monster}\r\n            //monster={null}\r\n            //selectedId={selectedId}\r\n          />\r\n        </Col>\r\n      </Row>\r\n    </>\r\n  );\r\n}\r\n\r\nconst monstersSelector = (state) => ({\r\n  monsterDict: getMonsterDict(state),\r\n  subMonsterDict: getSubMonsterDict(state),\r\n});\r\n\r\nexport default connect(monstersSelector, (disp) => ({\r\n  selectMonster: (monId) => disp(selectMonster(monId)),\r\n}))(Monsters);\r\n","import React from \"react\";\r\nimport { matchPath } from \"react-router\";\r\nimport { Col, Row } from \"react-bootstrap\";\r\nimport { DisplayList, DisplayColumn } from \"./DisplayList\";\r\nimport Storage from \"../utility/StorageUtil\";\r\nimport {\r\n  getIdFromItem,\r\n  CraftableItemDisplay,\r\n  EditingCraftableItemDisplay,\r\n} from \"../utility/craftableItemUtil\";\r\nimport { sortAscending as sortStrAsc } from \"../utility/stringUtil\";\r\n\r\nimport \"./Columnable.css\";\r\nimport \"../LayoutControl/Layout.css\";\r\n\r\nexport function CraftableItems(props) {\r\n  // let [filterObj, setFilterObj] = useState({});\r\n\r\n  const pathWithId = \"/craftableitems/:id\";\r\n  let craftableItem = null;\r\n\r\n  // extract monster id from the path\r\n  let match = matchPath(props.location.pathname, { path: pathWithId });\r\n  let selectedId = \"\";\r\n  if (match !== null) {\r\n    // if there is an id, search for the monster\r\n    selectedId = match.params.id;\r\n    if (Storage.craftableItemDict[selectedId] !== undefined) {\r\n      craftableItem = Storage.craftableItemDict[selectedId];\r\n    }\r\n  }\r\n\r\n  const headers = [\r\n    new DisplayColumn(\r\n      \"Name\",\r\n      (item) => {\r\n        return <>{item[\"name\"]}</>;\r\n      },\r\n      (a, b) => {\r\n        return sortStrAsc(a.name, b.name);\r\n      }\r\n    ),\r\n  ];\r\n\r\n  let displayOutput = [\"Select an item from the list\"];\r\n\r\n  if (craftableItem !== null) {\r\n    if (false && process.env.NODE_ENV === \"development\") {\r\n      displayOutput = [\r\n        <EditingCraftableItemDisplay craftableItem={craftableItem} key={0} />,\r\n      ];\r\n    } else {\r\n      displayOutput = [\r\n        <CraftableItemDisplay craftableItem={craftableItem} key={0} />,\r\n      ];\r\n    }\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Row className=\"h-100\" xs={1} md={2}>\r\n        <Col className=\"border h-100\">\r\n          {/* <MonsterFilterBlock submitFilter={setFilterObj} /> */}\r\n          <DisplayList\r\n            headers={headers}\r\n            items={Object.values(Storage.craftableItemDict)}\r\n            filterObject={{}}\r\n            pathRoot={props.match.path}\r\n            idFunction={getIdFromItem}\r\n            selectedId={selectedId}\r\n          />\r\n        </Col>\r\n        <Col className=\"border scrollableColumn\">{displayOutput}</Col>\r\n      </Row>\r\n    </>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { HarvestedItems } from \"./pages/HarvestedItems\";\r\nimport { Home } from \"./pages/Home\";\r\nimport Monsters from \"./pages/Monsters\";\r\nimport { CraftableItems } from \"./pages/CraftableItems\";\r\n\r\nexport const MENU = [\r\n  {\r\n    className: \"text-dark\",\r\n    linkName: \"Home\",\r\n    linkTarget: \"/\",\r\n    routePaths: [\"/\"],\r\n    exact: true,\r\n    renderFunction: (props) => {\r\n      return <Home {...props} />;\r\n    },\r\n  },\r\n  {\r\n    className: \"text-dark\",\r\n    linkName: \"Monsters\",\r\n    linkTarget: \"/monsters\",\r\n    routePaths: [\"/monsters\"],\r\n    exact: false,\r\n    renderFunction: (props) => {\r\n      return <Monsters {...props} />;\r\n    },\r\n  },\r\n  {\r\n    className: \"text-dark\",\r\n    linkName: \"Harvested Items\",\r\n    linkTarget: \"/harvesteditems\",\r\n    routePaths: [\"/harvesteditems\"],\r\n    exact: false,\r\n    renderFunction: (props) => {\r\n      return <HarvestedItems {...props} />;\r\n    },\r\n  },\r\n  // {\r\n  //     className: \"text-dark\",\r\n  //     linkName: \"Trinket Tables\",\r\n  //     linkTarget: \"/trinkettables\",\r\n  //     routePaths: [\"/trinkettables\"],\r\n  //     exact: false,\r\n  //     renderFunction: (props) => {\r\n  //         return <span>Trinket Tables</span>;\r\n  //     },\r\n  // },\r\n  {\r\n    className: \"text-dark\",\r\n    linkName: \"Craftable Items\",\r\n    linkTarget: \"/craftableitems\",\r\n    routePaths: [\"/craftableitems\"],\r\n    exact: false,\r\n    renderFunction: (props) => {\r\n      return <CraftableItems {...props} />;\r\n    },\r\n  },\r\n];\r\n","import React from \"react\";\r\nimport { Container, Navbar } from \"react-bootstrap\";\r\nimport { NavbarBrand, NavItem, NavLink } from \"reactstrap\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nimport { MENU } from \"../navigationConstants\";\r\n\r\nexport function NavMenu(props) {\r\n    let navOutput = [];\r\n    for (let i = 0; i < MENU.length; ++i) {\r\n        let linkDeets = MENU[i];\r\n        navOutput.push(\r\n            <NavItem key={i}>\r\n                <NavLink\r\n                    tag={Link}\r\n                    className={linkDeets.className}\r\n                    to={linkDeets.linkTarget}\r\n                >\r\n                    {linkDeets.linkName}\r\n                </NavLink>\r\n            </NavItem>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <header>\r\n            <Navbar className=\"border-bottom p-0\">\r\n                <Container>\r\n                    <NavbarBrand tag={Link} to=\"/\">\r\n                        Reactive RPG\r\n                    </NavbarBrand>\r\n                    <Container\r\n                        className=\"d-sm-inline-flex flex-sm-row-reverse\"\r\n                        navbar=\"true\"\r\n                    >\r\n                        <ul className=\"navbar-nav flex-grow\">{navOutput}</ul>\r\n                    </Container>\r\n                </Container>\r\n            </Navbar>\r\n        </header>\r\n    );\r\n}\r\n","import React from \"react\";\r\nimport { Container } from \"react-bootstrap\";\r\nimport { NavMenu } from \"./NavMenu\";\r\nimport \"./Layout.css\";\r\n\r\nexport function Layout(props) {\r\n    return (\r\n        <div className=\"viewportWrapper\">\r\n            <NavMenu />\r\n            <Container fluid className=\"mainContentWrapper\">\r\n                {props.children}\r\n            </Container>\r\n        </div>\r\n    );\r\n}\r\n","import React from \"react\";\r\nimport { Route, Switch } from \"react-router-dom\";\r\nimport { Layout } from \"./LayoutControl/Layout\";\r\nimport \"./App.css\";\r\n\r\nimport { MENU } from \"./navigationConstants\";\r\nfunction App() {\r\n    let routeOpts = [];\r\n    for (let i = 0; i < MENU.length; ++i) {\r\n        let linkDeets = MENU[i];\r\n        routeOpts.push(\r\n            <Route\r\n                key={i}\r\n                path={linkDeets.routePaths[0]}\r\n                render={(props) => linkDeets.renderFunction(props)}\r\n                exact={linkDeets.exact}\r\n            />\r\n        );\r\n    }\r\n\r\n    return (\r\n        <Layout>\r\n            <Switch>{routeOpts}</Switch>\r\n        </Layout>\r\n    );\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' },\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then(registration => {\r\n        registration.unregister();\r\n      })\r\n      .catch(error => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}\r\n","import \"bootstrap/dist/css/bootstrap.css\";\r\nimport React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./index.css\";\r\nimport App from \"./App\";\r\nimport * as serviceWorker from \"./serviceWorker\";\r\nimport { BrowserRouter as Router } from \"react-router-dom\";\r\nimport Storage from \"./utility/StorageUtil\";\r\nimport { Provider } from \"react-redux\";\r\nimport store from \"./redux/store\";\r\n\r\nconst baseUrl = document.getElementsByTagName(\"base\")[0].getAttribute(\"href\");\r\nconst rootElement = document.getElementById(\"root\");\r\n\r\nStorage.Init().then(() => {\r\n  // ReactDOM.render(\r\n  //   <React.StrictMode>\r\n  //     <Provider store={store}>\r\n  //       <Router basename={baseUrl}>\r\n  //         <App />\r\n  //       </Router>\r\n  //     </Provider>\r\n  //   </React.StrictMode>,\r\n  //   rootElement\r\n  // );\r\n});\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <Provider store={store}>\r\n      <Router basename={baseUrl}>\r\n        <App />\r\n      </Router>\r\n    </Provider>\r\n  </React.StrictMode>,\r\n  rootElement\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}